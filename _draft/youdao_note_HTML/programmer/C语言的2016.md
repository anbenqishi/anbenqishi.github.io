::: {#sidebar}
::: {#outline}
:::
:::

::: {#page-container}
::: {#pf1 .pf .w0 .h0 page-no="1"}
::: {.pc .pc1 .w0 .h0}
![](data:image/png;base64,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AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcA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){.bi
.x0 .y0 .w1 .h1}

::: {.c .x0 .y1 .w1 .h2}
::: {.t .m0 .x1 .h3 .y2 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
这是我在2015年初写的草稿，且从未考虑过发布。这是一个未经雕琢的版本，因为没有任何人对这个草
:::

::: {.t .m0 .x1 .h3 .y3 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
稿提供改进。最简单的变化只是将发布时间从2015年改成2016年。
:::

::: {.t .m0 .x1 .h3 .y4 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
如果有缺陷、改进和抱怨，请随时联系。-Matt
:::

::: {.t .m0 .x1 .h3 .y5 .ff1 .fs0 .fc1 .sc0 .ls0 .ws0}
AdriánArroyoCalle[在]{.fc0}¿CómoprogramarenC(en2016)?[提供了西班牙语翻译。]{.fc0}
:::

::: {.t .m0 .x1 .h3 .y6 .ff1 .fs0 .fc1 .sc0 .ls0 .ws0}
KeithThompson[在]{.fc0}howto-c-response[提供了一些勘误和替代性意见]{.fc0}
:::

::: {.t .m0 .x1 .h3 .y7 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
下面是正文
:::

::: {.t .m0 .x2 .h3 .y8 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
使用C语言的首要规则是，能不用就不用。
:::

::: {.t .m0 .x2 .h3 .y9 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
如果必须要用C语言，应该遵照现代的规则。
:::

::: {.t .m0 .x1 .h3 .ya .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
自[70年代初]{.fc1}，C语言已经存在。人们在C不同的发展时间点上"学会了C语言"，但是知识一般在学习后
:::

::: {.t .m0 .x1 .h3 .yb .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
就停滞了，因此每个人都有自己对C语言的理解，这些理解基于他们第一次学习的时间。
:::

::: {.t .m0 .x1 .h3 .yc .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
尤其需要注意的是，不要将对C语言开发的知识停滞在"80、90年代学到的知识"。
:::

::: {.t .m0 .x1 .h3 .yd .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
本文假设我们是在一个现代化的平台、符合现代标准，且没有过多的历史遗漏需求。我们不该只是因为一
:::

::: {.t .m0 .x1 .h3 .ye .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
些公司拒绝升级20年前的老系统而仍然依赖古老的标准。
:::

::: {.t .m0 .x1 .h4 .yf .ff1 .fs1 .fc2 .sc0 .ls0 .ws0}
预检
:::

::: {.t .m0 .x1 .h3 .y10 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
c99标准（c99表示"1999年制定的标准"；c11表示"2011年制定的标准"，因此11\>99）
:::

::: {.t .m0 .x3 .h3 .y11 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
clang，默认
:::

::: {.t .m0 .x4 .h3 .y12 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
clang默认使用扩展的c11版本（[GNU
C11模式]{.ff2}）；如果需要使用c99标准，使用[-]{.ff2}
:::

::: {.t .m0 .x5 .h3 .y13 .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
std=c99[。]{.ff1}
:::

::: {.t .m0 .x4 .h3 .y14 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
如果需要使用标准c11版本，需要指定[-std=c11]{.ff2}；如果需要使用标准的c99版本，使用[-]{.ff2}
:::

::: {.t .m0 .x5 .h3 .y15 .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
std=c99[。]{.ff1}
:::

::: {.t .m0 .x4 .h3 .y16 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
clang编译源码速度快于gcc
:::

::: {.t .m0 .x3 .h3 .y17 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
gcc，需要用户指定[-std=c99]{.ff2}或[-std=c11]{.ff2}
:::

::: {.t .m0 .x4 .h3 .y18 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
gcc构建源码文件慢于clang，但是有的时候会生成更快的代码。性能和回归测试都是非
:::

::: {.t .m0 .x5 .h3 .y19 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
常重要的。
:::

::: {.t .m0 .x4 .h3 .y1a .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
gcc-5默认使用[GNU
c11模式]{.ff2}（和clang相同），但是如果需要标准的c11或者c99标准，
:::

::: {.t .m0 .x5 .h3 .y1b .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
仍然需要指定[-std=c11]{.ff2}和[-std=c99]{.ff2}。
:::

::: {.t .m0 .x1 .h3 .y1c .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
优化
:::

::: {.t .m0 .x3 .h3 .y1d .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
-O2，-O3
:::

::: {.t .m0 .x4 .h3 .y1e .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
通常我们需要使用[-O2]{.ff2}优化级别，但是有的时候我们希望使用[-O3]{.ff2}优化级别。可以在这两
:::

::: {.t .m0 .x5 .h3 .y1f .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
种优化级别（和跨编译器）下的测试之后，保留最佳性能的二进制代码。
:::

::: {.t .m0 .x3 .h3 .y20 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
-Os
:::

::: {.t .m0 .x6 .h5 .y21 .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
-Os优化级别能够帮助提高缓存性能（它应该是）
:::

::: {.t .m0 .x1 .h3 .y22 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
警告
:::

::: {.t .m0 .x7 .h5 .y23 .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
-Wall -Wextra -pedantic
:::

::: {.t .m0 .x4 .h3 .y24 .ff1 .fs0 .fc1 .sc0 .ls0 .ws0}
新版本编译器提供了[-Wpedantic]{.ff2}开关，但是为了向下兼容，它们仍然支持古老的[-]{.ff2}
:::

::: {.t .m0 .x5 .h3 .y25 .ff2 .fs0 .fc1 .sc0 .ls0 .ws0}
pedantic[开关。]{.ff1}
:::

::: {.t .m0 .x3 .h3 .y26 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
在测试工程中，应该在全平台中添加[-Werror]{.ff2}和[-Wshadow]{.ff2}开关
:::
:::

[](https://github.com/AdrianArroyoCalle){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:56.003025px;bottom:713.210330px;width:98.299542px;height:14.257140px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://adrianarroyocalle.github.io/blog/2016/01/10/como-programar-en-c-en-2016/){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:164.807861px;bottom:713.210330px;width:172.586979px;height:14.257140px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://github.com/Keith-S-Thompson){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:56.003025px;bottom:694.450810px;width:82.541592px;height:14.257200px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://github.com/Keith-S-Thompson/how-to-c-response/blob/master/README.md){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:149.049927px;bottom:694.450810px;width:92.296513px;height:14.257200px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://www.bell-labs.com/usr/dmr/www/chist.html){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:66.508316px;bottom:619.413020px;width:43.521942px;height:14.257150px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://twitter.com/oliviergay/status/685389448142565376){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:137.794250px;bottom:126.414551px;width:63.031770px;height:14.257202px;background-color:rgba(255,255,255,0.000001);"}
:::
:::

::: {.pi data="{\"ctm\":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}"}
:::
:::

::: {#pf2 .pf .w0 .h0 page-no="2"}
::: {.pc .pc2 .w0 .h0}
![](data:image/png;base64,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){.bi
.x0 .y0 .w1 .h1}

::: {.c .x0 .y1 .w1 .h2}
::: {.t .m0 .x4 .h3 .y27 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
在部署产品源码时，使用-Werror开关可能会非常棘手，因为不同的平台和编译器可能
:::

::: {.t .m0 .x5 .h3 .y28 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
会发出不同的警告信息。我们可能不希望因为平台上的GCC版本有从未看见过的警告而中止
:::

::: {.t .m0 .x5 .h3 .y29 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
用户的整个构建。
:::

::: {.t .m0 .x3 .h3 .y2a .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
其他花哨的选项[-Wstrict-overflow -fno-strict-aliasing]{.ff2}
:::

::: {.t .m0 .x4 .h3 .y2b .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
要么通过[-fno-strict-aliasing]{.ff2}开关或者确保只使用对象创建时的类型来访问对象。由
:::

::: {.t .m0 .x5 .h3 .y2c .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
于大量已经存在的C代码使用了跨类型别名，如果我们无法控制源码树，使用[-fno-strict-]{.ff2}
:::

::: {.t .m0 .x5 .h3 .y2d .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
aliasing[开关会更加安全。]{.ff1}
:::

::: {.t .m0 .x3 .h3 .y2e .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
截至目前，clang会将一些有效语法作为警告，因此我们应该增加[-Wno-missing-field-]{.ff2}
:::

::: {.t .m0 .x8 .h3 .y2f .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
initializers[开关]{.ff1}
:::

::: {.t .m0 .x4 .h3 .y30 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
GCC在4.7.0版本后修复了这个无效的警告
:::

::: {.t .m0 .x1 .h3 .y31 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
构建
:::

::: {.t .m0 .x3 .h3 .y32 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
编译单元
:::

::: {.t .m0 .x4 .h3 .y33 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
构建C项目的通常步骤是分解每个源文件到目标文件，然后将所有目标文件链接到一
:::

::: {.t .m0 .x5 .h3 .y34 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
起。这个步骤对增量开发的非常有效，但这对性能和优化是次优的。这种方式下编译器无法
:::

::: {.t .m0 .x5 .h3 .y35 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
检测跨文件边界的潜在优化。
:::

::: {.t .m0 .x3 .h3 .y36 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
LTO-链接时优化
:::

::: {.t .m0 .x4 .h3 .y37 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
LTO修复了"源码分析和优化无法跨编译单元的问题"，它通过在目标文件中增加中间
:::

::: {.t .m0 .x5 .h3 .y38 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
标记的方式，使得源码感知的优化能够在链接时进行跨编译单元执行。（该过程会显著降低
:::

::: {.t .m0 .x5 .h3 .y39 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
链接速度，但是能够通过[make -j]{.ff2}来改善）
:::

::: {.t .m0 .x4 .h3 .y3a .ff1 .fs0 .fc1 .sc0 .ls0 .ws0}
clangLTO指南
:::

::: {.t .m0 .x4 .h3 .y3b .ff1 .fs0 .fc1 .sc0 .ls0 .ws0}
gccLTO
:::

::: {.t .m0 .x4 .h3 .y3c .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
截至2016年，clang和gcc都支持在目标文件编译和最终应用链接阶段，在命令行参数
:::

::: {.t .m0 .x5 .h3 .y3d .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
中增加[-flto]{.ff2}开关开启LTO。
:::

::: {.t .m0 .x6 .h5 .y3e .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
LTO的使用需要一些注意事项。有的时候，如果项目代码不是直接使用而是作为库使用，
:::

::: {.t .m0 .x5 .h5 .y3f .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
LTO会在最终链接结果中移除一些函数和代码，因为LTO会在链接时全局检测未使用/不可达
:::

::: {.t .m0 .x5 .h5 .y40 .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
或者不需要的代码。
:::

::: {.t .m0 .x1 .h3 .y41 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
架构
:::

::: {.t .m0 .x7 .h5 .y42 .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
-march=native
:::

::: {.t .m0 .x4 .h3 .y43 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
授权编译器使用CPU的所有特性指令集
:::

::: {.t .m0 .x4 .h3 .y44 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
同样，性能测试和回归测试（比较跨编译器或者编译器版本）非常重要，以确保启动了
:::

::: {.t .m0 .x5 .h3 .y45 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
优化之后没有副作用。
:::

::: {.t .m0 .x7 .h5 .y46 .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
-msse2和-msse4.2对于需要使用非构建机器构建目标文件可能会有用。
:::

::: {.t .m0 .x1 .h4 .y47 .ff1 .fs1 .fc2 .sc0 .ls0 .ws0}
编写代码
:::

::: {.t .m0 .x1 .h6 .y48 .ff1 .fs2 .fc2 .sc0 .ls0 .ws0}
类型
:::

::: {.t .m0 .x1 .h3 .y49 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
如果我们在新代码中还在使用[char]{.ff2}、[int]{.ff2}、[short]{.ff2}、[long]{.ff2}或者[unsigned]{.ff2}类型，那我们可能做错了。
:::

::: {.t .m0 .x1 .h3 .y4a .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
对于现代程序，我们应该引入[\#include ]{.ff2}，然后使用标准类型。
:::

::: {.t .m0 .x1 .h3 .y4b .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
更多细节，参见[stdint.h规范]{.fc1}。
:::

::: {.t .m0 .x1 .h3 .y4c .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
常见的标准类型：
:::
:::

[](http://llvm.org/docs/LinkTimeOptimization.html){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:137.794250px;bottom:413.809450px;width:50.275330px;height:14.257080px;background-color:rgba(255,255,255,0.000001);"}
:::

[](http://llvm.org/docs/GoldPlugin.html){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:188.069580px;bottom:413.809450px;width:21.010590px;height:14.257080px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://gcc.gnu.org/onlinedocs/gccint/LTO-Overview.html){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:137.794250px;bottom:395.049930px;width:40.520420px;height:14.257200px;background-color:rgba(255,255,255,0.000001);"}
:::

[](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/stdint.h.html){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:129.540085px;bottom:85.143799px;width:58.529495px;height:14.257080px;background-color:rgba(255,255,255,0.000001);"}
:::
:::

::: {.pi data="{\"ctm\":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}"}
:::
:::

::: {#pf3 .pf .w0 .h0 page-no="3"}
::: {.pc .pc3 .w0 .h0}
![](data:image/png;base64,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AECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEB3BQAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINAB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){.bi
.x0 .y0 .w1 .h1}

::: {.c .x0 .y4d .w1 .h7}
::: {.t .m0 .x7 .h5 .y4e .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
int8\_t、int16\_t、int32\_t、int64\_t------有符号整数
:::

::: {.t .m0 .x7 .h5 .y4f .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
uint8\_t、uint16\_t、uint32\_t、uint64\_t------无符号整数
:::

::: {.t .m0 .x7 .h5 .y50 .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
float------标准32位浮点数
:::

::: {.t .m0 .x7 .h5 .y51 .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
double------标准64位浮点数
:::

::: {.t .m0 .x1 .h3 .y52 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
注意，我们不再有[char]{.ff2}类型。[char]{.ff2}类型在C语言中实际上是名不符实且滥用的。
:::

::: {.t .m0 .x1 .h3 .y53 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
开发者经常滥用[char]{.ff2}来表示"字节"，甚至当他们是在操作无符号字节类型的时候。因此，使用[uint8\_t]{.ff2}
:::

::: {.t .m0 .x1 .h3 .y54 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
类型来表示无符号字节（八位组值），使用[uint8\_t
\*]{.ff2}类型来表示无符号字节序列（八位组值）会更加清
:::

::: {.t .m0 .x1 .h3 .y55 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
晰。
:::

::: {.t .m0 .x1 .h8 .y56 .ff1 .fs3 .fc2 .sc0 .ls0 .ws0}
特殊标准类型
:::

::: {.t .m0 .x1 .h3 .y57 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
除了像[uint16\_t]{.ff2}和[int32\_t]{.ff2}这样标准的固定宽度类型之外，标准还在[stdint.h规范]{.fc1}中定义了快速类型和最
:::

::: {.t .m0 .x1 .h3 .y58 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
小类型
:::

::: {.t .m0 .x1 .h3 .y59 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
快速类型有：
:::

::: {.t .m0 .x3 .h3 .y5a .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
有符号整数：[int\_fast8\_t]{.ff2}、[int\_fast16\_t]{.ff2}、[int\_fast32\_t]{.ff2}、[int\_fast64\_t]{.ff2}
:::

::: {.t .m0 .x3 .h3 .y5b .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
无符号整数：[uint\_fast8\_t]{.ff2}、[uint\_fast16\_t]{.ff2}、[uint\_fast32\_t]{.ff2}、[uint\_fast64\_t]{.ff2}
:::

::: {.t .m0 .x1 .h3 .y5c .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
快速类型提供了最小[X]{.ff2}位，但是它实际存储大小是不确定的。如果在目标平台上更大的类型有更好的性
:::

::: {.t .m0 .x1 .h3 .y5d .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
能，快速类型将自动使用这个较大的类型。
:::

::: {.t .m0 .x1 .h3 .y5e .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
例如在一些64位系统中，当我们在使用[uint\_fast16\_t]{.ff2}类型时，实际上会使用[uint64\_t]{.ff2}类型，因为处理和
:::

::: {.t .m0 .x1 .h3 .y5f .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
字宽相同的整数速度会比处理16位整数快很多。
:::

::: {.t .m0 .x1 .h3 .y60 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
不过，不是每个系统都遵照快速类型指引。其中一个就是OSX系统，其快速类型宽度[和它们对应的固定]{.fc1}
:::

::: {.t .m0 .x1 .h3 .y61 .ff1 .fs0 .fc1 .sc0 .ls0 .ws0}
宽度类型宽度完全相同[。]{.fc0}
:::

::: {.t .m0 .x1 .h3 .y62 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
快速类型对于编写自描述代码也非常有用。如果我们的计数器只需要16位，但是因为平台计算64位整数
:::

::: {.t .m0 .x1 .h3 .y63 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
速度会更快，我们更希望直接使用64位整数进行运算，这时[uint\_fast16\_t]{.ff2}类型就非常有用。在64位
:::

::: {.t .m0 .x1 .h3 .y64 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
Linux平台上，[uint\_fast16\_t]{.ff2}类型实际使用64位计数器，而从代码层面来看，"这里只需要一个16位的
:::

::: {.t .m0 .x1 .h3 .y65 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
变量"。
:::

::: {.t .m0 .x1 .h3 .y66 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
使用快速类型时，有一点需要注意：它可能会影响测试用例。如果用例需要测试变量的存储位宽，使用
:::

::: {.t .m0 .x1 .h3 .y67 .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
uint\_fast16\_t[类型，在一些平台上可能是16位（如OSX）而在另一些平台上是64位（如Linux），这时]{.ff1}
:::

::: {.t .m0 .x1 .h3 .y68 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
可能会导致测试用例失败。
:::

::: {.t .m0 .x1 .h3 .y69 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
快速类型和[int]{.ff2}类型一样，在不同平台上有不确定的长度，但是使用快速类型，可以将这些不确定长度限
:::

::: {.t .m0 .x1 .h3 .y6a .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
制在代码中的安全位置（如计数器、有边界检测的临时变量等）。
:::

::: {.t .m0 .x1 .h3 .y6b .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
最小类型有：
:::

::: {.t .m0 .x3 .h3 .y6c .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
有符号整数：[int\_least8\_t]{.ff2}、[int\_least16\_t]{.ff2}、[int\_least32\_t]{.ff2}、[int\_least64\_t]{.ff2}
:::

::: {.t .m0 .x3 .h3 .y6d .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
无符号整数：[uint\_least8\_t]{.ff2}、[uint\_least16\_t]{.ff2}、[uint\_least32\_t]{.ff2}、[uint\_least64\_t]{.ff2}
:::

::: {.t .m0 .x1 .h3 .y6e .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
最小类型提供满足对应类型最紧凑的字节数。
:::

::: {.t .m0 .x1 .h3 .y6f .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
在实践中，最小类型规范通常是定义的标准固定宽度类型，因为标准固定宽度类型已经提供了对应类型需
:::

::: {.t .m0 .x1 .h3 .y70 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
要的最小字节数。
:::

::: {.t .m0 .x1 .h8 .y71 .ff1 .fs3 .fc2 .sc0 .ls0 .ws0}
是否使用[int]{.ff2}类型
:::

::: {.t .m0 .x1 .h3 .y72 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
一些读者指出他们对[int]{.ff2}类型是真爱，至死方休。我想指出，如果使用长度不可控的变量类型，技术上不
:::

::: {.t .m0 .x1 .h3 .y73 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
可能正确的开发应用。
:::
:::

[](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/stdint.h.html){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:365.909210px;bottom:599.903200px;width:58.529510px;height:14.257200px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://opensource.apple.com/source/xnu/xnu-1456.1.26/EXTERNAL_HEADERS/stdint.h){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:56.003025px;bottom:408.556760px;width:476.490135px;height:33.016600px;background-color:rgba(255,255,255,0.000001);"}
:::
:::

::: {.pi data="{\"ctm\":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}"}
:::
:::

::: {#pf4 .pf .w0 .h0 page-no="4"}
::: {.pc .pc4 .w0 .h0}
![](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA+AAAAXLCAIAAAAz/kHlAAAACXBIWXMAABYlAAAWJQFJUiTwAAAZB0lEQVR42uzasRFAQBRFUd9sA9t/kUp4GhBImG+dEwt4BJdRSTYAAKCH3QQAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AADg0rhzUNVhqUcl87sn7/FY/hYDAK/GVRIrAABAE35xAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAS6CQAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQTAACAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6CYAAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAACAQAcAgH6GCQCA9VQdP7zqZLr1C/AFHQAAOr1eJrECAAA04Qs6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINBNAAAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoJsAAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINDPdutAAAAAAECQv/UEGxRFAACAoAMAgKADAACCDgAAgg4AAAg6AAAIOgAAIOgAACDoAACAoAMAgKADAACCDgAACDoAAAg6AAAg6AAAIOgAAICgAwCAoAMAAIIOAACCDgAACDoAAAg6AAAg6AAAIOgAAICgAwAAgg4AAIIOAAAIOgAACDoAACDoAAAg6AAAgKADAICgAwAAgg4AAIIOAAAIOgAACDoAACDoAACAoAMAgKADAACCDgAAgg4AAAg6AAAIOgAAIOgAACDoAACAoAMAgKADAACCDgAAgg4AAAg6AAAg6AAAIOgAAICgAwCAoAMAAIIOAACCDgAACDoAAAg6AAAg6AAAIOgAAICgAwCAoAMAAIIOAAAIOgAACDoAALACKWIdjyPNpOsAAAAASUVORK5CYII=){.bi
.x0 .y0 .w1 .h1}

::: {.c .x0 .y74 .w1 .h9}
::: {.t .m0 .x1 .h3 .y75 .ff1 .fs0 .fc1 .sc0 .ls0 .ws0}
RATIONALE[提供了]{.fc0}inttypes.h[头文件，就为了解决使用非固定位宽类型不安全问题。如果开发者能够理]{.fc0}
:::

::: {.t .m0 .x1 .h3 .y76 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
解[int]{.ff2}类型在一些平台上是16位，在另一些平台上是32位，同时在代码中任何使用[int]{.ff2}类型的地方都对16
:::

::: {.t .m0 .x1 .h3 .y77 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
位和32位两种位宽边界进行了测试，那么请放心使用[int]{.ff2}类型。
:::

::: {.t .m0 .x1 .h3 .y78 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
对于其他无法在写代码的时候记得多层次决策树平台规范结构的人来说，我们可以使用固定宽度类型，这
:::

::: {.t .m0 .x1 .h3 .y79 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
能够在写出更加正确代码的同时，减少概念上的困扰和测试成本。
:::

::: {.t .m0 .x1 .h3 .y7a .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
或者，规范中更简明的说到："ISOC标准整数提升规则可能会意外产生未知的变化"。
:::

::: {.t .m0 .x1 .h3 .y7b .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
祝你好运。
:::

::: {.t .m0 .x1 .h8 .y7c .ff1 .fs3 .fc2 .sc0 .ls0 .ws0}
使用[char]{.ff2}类型的特殊场景
:::

::: {.t .m0 .x1 .h3 .y7d .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
在2016年，唯一能够使用[char]{.ff2}类型的场景是已经存在的API需要[char]{.ff2}类型（例如[strncat]{.ff2}、printf函数中
:::

::: {.t .m0 .x1 .h3 .y7e .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
的"%s"占位符等）或者在初始化只读字符串（例如[const char \*hello =
\"hello\";]{.ff2}），因为字符串
:::

::: {.t .m0 .x1 .h3 .y7f .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
（[\"hello\"]{.ff2}）的C类型是[char \[\]]{.ff2}。
:::

::: {.t .m0 .x1 .h3 .y80 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
另外：在C11中增加了本地unicode支持，对于像[const char \*abcgrr =
u8\"abc\";]{.ff2}多字节UTF-8字符串
:::

::: {.t .m0 .x1 .h3 .y81 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
类型仍然是[char \[\]]{.ff2}。
:::

::: {.t .m0 .x1 .h8 .y82 .ff1 .fs3 .fc2 .sc0 .ls0 .ws0}
使用[int]{.ff2}、[long]{.ff2}等类型的特殊场景
:::

::: {.t .m0 .x1 .h3 .y83 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
如果函数使用这些类型作为其返回值或者参数，请使用函数原型或者API文档中说明的类型。
:::

::: {.t .m0 .x1 .h8 .y84 .ff1 .fs3 .fc2 .sc0 .ls0 .ws0}
符号类型
:::

::: {.t .m0 .x1 .h3 .y85 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
在任何时候，都不应该在代码中输入[unsigned]{.ff2}字符。现在我们可以避免在代码中使用c语言中丑陋的多词
:::

::: {.t .m0 .x1 .h3 .y86 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
组合类型，它既影响可读性，也影响使用。当能够输入[uint64\_t]{.ff2}的时候，谁还希望输入[unsigned
long ]{.ff2}
:::

::: {.t .m0 .x1 .h3 .y87 .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
long
int[。头文件中定义的类型更加明确，含义更加确切，传达的意图更好，使得排版的使用和可读性更]{.ff1}
:::

::: {.t .m0 .x1 .h3 .y88 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
加紧凑。
:::

::: {.t .m0 .x1 .h3 .y89 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
但是，你可能会说："我需要在进行指针运算的时候将指针类型转换成[long]{.ff2}类型。"
:::

::: {.t .m0 .x1 .h3 .y8a .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
你可以这样说，但是这是错误的。
:::

::: {.t .m0 .x1 .h3 .y8b .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
对于指针运算的正确方式是使用头文件中定义的[uintptr\_t]{.ff2}类型，同时也可以使用[stddef.h]{.fc1}头文件中定义
:::

::: {.t .m0 .x1 .h3 .y8c .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
的[ptrdiff\_t]{.ff2}类型。
:::

::: {.t .m0 .x1 .h3 .y8d .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
不要使用：
:::

::: {.t .m0 .x1 .h3 .y8e .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
longdiff=(long)ptrOld-(long)ptrNew;
:::

::: {.t .m0 .x1 .h3 .y8f .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
而使用：
:::

::: {.t .m0 .x1 .h3 .y90 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
ptrdiff\_tdiff=(uintptr\_t)ptrOld-(uintptr\_t)ptrNew;
:::

::: {.t .m0 .x1 .h3 .y91 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
同时，如果需要输出内容：
:::

::: {.t .m0 .x1 .h3 .y92 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
printf(\"%pisunalignedby%\"PRIuPTR\"bytes.\\n\",(void\*)p,((uintptr\_t)somePtr&(sizeof(void\*)
:::

::: {.t .m0 .x1 .h3 .y93 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
-1)));
:::

::: {.t .m0 .x1 .h8 .y94 .ff1 .fs3 .fc2 .sc0 .ls0 .ws0}
系统相关类型
:::

::: {.t .m0 .x1 .h3 .y95 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
如果继续争论，"在32位平台上我需要32位long类型，而在64位平台上我需要64位long类型"。
:::

::: {.t .m0 .x1 .h3 .y96 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
如果我们跳出思维定势，不是为了在不同平台上使用两种不同大小的类型而在代码中故意引入难题，我们
:::

::: {.t .m0 .x1 .h3 .y97 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
仍然不会为了系统相关类型而试图使用[long]{.ff2}类型。
:::

::: {.t .m0 .x1 .h3 .y98 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
在这种情况下，我们应该使用[intptr\_t]{.ff2}类型------定义了当前平台上字长的整数。
:::

::: {.t .m0 .x1 .h3 .y99 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
在32位平台上，[intptr\_t]{.ff2}是[int32\_t]{.ff2}类型。
:::
:::

[](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/inttypes.h.html#tag_13_19_06){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:56.003025px;bottom:775.491460px;width:59.279881px;height:14.257320px;background-color:rgba(255,255,255,0.000001);"}
:::

[](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/inttypes.h.html){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:146.798798px;bottom:775.491460px;width:48.774562px;height:14.257320px;background-color:rgba(255,255,255,0.000001);"}
:::

[](http://pubs.opengroup.org/onlinepubs/7908799/xsh/stddef.h.html){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:428.940980px;bottom:341.022710px;width:40.520420px;height:14.257080px;background-color:rgba(255,255,255,0.000001);"}
:::
:::

::: {.pi data="{\"ctm\":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}"}
:::
:::

::: {#pf5 .pf .w0 .h0 page-no="5"}
::: {.pc .pc5 .w0 .h0}
![](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA+AAAAXLCAIAAAAz/kHlAAAACXBIWXMAABYlAAAWJQFJUiTwAAAdoklEQVR42uzdoWsb/R/A8cuPuMLgEYGcmors1QxqCjWNWX2PTcxFBJaDyMEg7P6DroWJVmYiMVWL2cygFVGjFzlRuUDEzDIYObhH7KGE9ieewu95cr/k9VK779R9PmJvjrusUhRFAAAAlMN/jAAAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEA3AgAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAgP8vVSMAKINK5fsG3nVR/GH1AHf/RSiKwhQAAKAkvOICAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQjAAAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0I0AAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAA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){.bi
.x0 .y0 .w1 .h1}

::: {.c .x0 .y4d .w1 .h7}
::: {.t .m0 .x1 .h3 .y9a .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
在64位平台上，[intptr\_t]{.ff2}是[int64\_t]{.ff2}类型。
:::

::: {.t .m0 .x1 .h3 .y9b .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
同时，[intptr\_t]{.ff2}还有对应的无符号类型[uintptr\_t]{.ff2}。
:::

::: {.t .m0 .x1 .h3 .y9c .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
对于指针偏移量，我们有一个更加恰当的类型：[ptrdiff\_t]{.ff2}，它是存储指针差值的正确类型。
:::

::: {.t .m0 .x1 .h8 .y9d .ff1 .fs3 .fc2 .sc0 .ls0 .ws0}
最大值持有者
:::

::: {.t .m0 .x1 .h3 .y9e .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
我们需要一个整数类型，能够持有系统中任何整数吗？
:::

::: {.t .m0 .x1 .h3 .y9f .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
在这种情况下，人们倾向于使用已知类型中最大的类型，例如将较小的无符号类型转换成64位无符号类
:::

::: {.t .m0 .x1 .h3 .ya0 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
型[uint64\_t]{.ff2}，但是，还有技术上更正确的方式来确保一个值可以持有任何其他值。
:::

::: {.t .m0 .x1 .h3 .ya1 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
对于任何整数最安全的容器是[intmax\_t]{.ff2}类型（还有[uintmax\_t]{.ff2}）。我们可以在不损失精度的情况下，将任
:::

::: {.t .m0 .x1 .h3 .ya2 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
意有符号整数赋值或转换成[intmax\_t]{.ff2}类型，同样，也可以在不损失精度的情况系，将任意无符号整数赋值
:::

::: {.t .m0 .x1 .h3 .ya3 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
或转换成[uintmax\_t]{.ff2}类型。
:::

::: {.t .m0 .x1 .h8 .ya4 .ff1 .fs3 .fc2 .sc0 .ls0 .ws0}
其他类型
:::

::: {.t .m0 .x1 .h3 .ya5 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
系统相关类型中，使用最广的类型是[size\_t]{.ff2}，它由[stddef.h]{.fc1}头文件提供。
:::

::: {.t .m0 .x1 .h3 .ya6 .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
size\_t[表示"能够持有最大数组索引的整数"，同时它也表示应用程序中变量持有最大内存偏移量的能]{.ff1}
:::

::: {.t .m0 .x1 .h3 .ya7 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
力。
:::

::: {.t .m0 .x1 .h3 .ya8 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
在实际使用中，[size\_t]{.ff2}类型是[sizeof]{.ff2}操作符的返回类型。
:::

::: {.t .m0 .x1 .h3 .ya9 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
在任一情况下：[size\_t]{.ff2}类型在所有现代平台上事实上定义为[uintptr\_t]{.ff2}类型，即在32位平台上，[size\_t]{.ff2}类
:::

::: {.t .m0 .x1 .h3 .yaa .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
型是[uint32\_t]{.ff2}，而在64位平台上[size\_t]{.ff2}类型是[uint64\_t]{.ff2}。
:::

::: {.t .m0 .x1 .h3 .yab .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
除此以外还有[ssize\_t]{.ff2}类型，它用来表示有符号好的[size\_t]{.ff2}类型，用于库函数的返回值。这些函数通常会
:::

::: {.t .m0 .x1 .h3 .yac .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
在出错时返回[-1]{.ff2}。（注意：[ssize\_t]{.ff2}是POSIX规范中定义，因此不适用于Windows平台接口。）
:::

::: {.t .m0 .x1 .h3 .yad .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
综上所述，我们应该在自己的函数参数中使用[size\_t]{.ff2}类型表示任何变量长度和系统相关的类型吗？从技术
:::

::: {.t .m0 .x1 .h3 .yae .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
上来说，[size\_t]{.ff2}类型是[sizeof]{.ff2}操作符的返回值，因此任何接受代表字节数量参数的函数，都可以使用
:::

::: {.t .m0 .x1 .h3 .yaf .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
size\_t[类型。]{.ff1}
:::

::: {.t .m0 .x1 .h3 .yb0 .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
size\_t[类型的其他使用包括：]{.ff1}size\_t[类型作为malloc函数的参数；]{.ff1}ssize\_t[类型作为]{.ff1}read()[和]{.ff1}write()[函]{.ff1}
:::

::: {.t .m0 .x1 .h3 .yb1 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
数的返回值（除了Windows平台，[ssize\_t]{.ff2}不存在，这两个函数的返回值是[int]{.ff2}类型）。
:::

::: {.t .m0 .x1 .h8 .yb2 .ff1 .fs3 .fc2 .sc0 .ls0 .ws0}
打印类型
:::

::: {.t .m0 .x1 .h3 .yb3 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
在打印时，我们不应该进行类型转换，而应该使用[inttypes.h]{.fc1}头文件中定义的描述符。
:::

::: {.t .m0 .x1 .h3 .yb4 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
这些描述符包括但不限于：
:::

::: {.t .m0 .x7 .h5 .yb5 .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
size\_t：%zu
:::

::: {.t .m0 .x7 .h5 .yb6 .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
ssize\_t：%zd
:::

::: {.t .m0 .x7 .h5 .yb7 .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
ptrdiff\_t：%td
:::

::: {.t .m0 .x3 .h3 .yb8 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
原始指针值：[%p]{.ff2}（在现代编译器中打印出16进制地址编码；使用前需要将指针转换成[(void
]{.ff2}
:::

::: {.t .m0 .x8 .h3 .yb9 .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
\*)[类型）]{.ff1}
:::

::: {.t .m0 .x3 .h3 .yba .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
64位类型在打印时需要使用[PRIu64]{.ff2}（无符号）和[PRId64]{.ff2}（有符号）
:::

::: {.t .m0 .x4 .h3 .ybb .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
在一些平台上64位值使用[long]{.ff2}类型，其他使用[long long]{.ff2}类型
:::

::: {.t .m0 .x4 .h3 .ybc .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
如果不使用这些宏，事实上不可能指定一个正确的跨平台格式化字符串，因为类型长度
:::

::: {.t .m0 .x5 .h3 .ybd .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
会发生变化（记住，在打印前转换值的类型既不安全也不符合逻辑）。
:::

::: {.t .m0 .x7 .h5 .ybe .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
intptr\_t：\"%\" PRIdPTR
:::
:::

[](http://pubs.opengroup.org/onlinepubs/7908799/xsh/stddef.h.html){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:287.119510px;bottom:554.880620px;width:40.520410px;height:14.257080px;background-color:rgba(255,255,255,0.000001);"}
:::

[](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/inttypes.h.html){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:287.119510px;bottom:278.741460px;width:49.524960px;height:14.257080px;background-color:rgba(255,255,255,0.000001);"}
:::
:::

::: {.pi data="{\"ctm\":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}"}
:::
:::

::: {#pf6 .pf .w0 .h0 page-no="6"}
::: {.pc .pc6 .w0 .h0}
![](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA+AAAAXLCAIAAAAz/kHlAAAACXBIWXMAABYlAAAWJQFJUiTwAAAaO0lEQVR42uzdMYriUBzA4ZfFzmoLi1wiV7DRygMI01sIEsgJhFxAxHLqKeYCVtN4BC9gLaQYC60U3hbLShgWlimWPML3dS/de//mR3jRLMYYAACANPxwBAAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAA/M2gx3u73W6Hw+FyuUyn09FoZNgAAAj0zuz3+9ls9lzudrvVamXeAAAkrrdXXDabTXv5+vpq2AAApC+LMfZzY1n25cn1eh0Oh0YOAEDKevsGfTKZtJdFUahzAAAEemeqqmovF4uFYQMAkL7eXnEJf37F5XQ6zedzv+ICAIBABwAAvscfFQEAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINABAACBDgAAAh0AABDooWmauq7zPM/zvK7rpmkMGwCA9GUxxl5urK7r9Xr9XJZlud1uzRsAAIHejTzPz+dz+8n9fh8MBkYOAEDK3EEHAACB/v8tl8v2sixLr88BABDoXQZ6WZbPOq+qyrABAEhfb++g//Z4PEII3p0DACDQAQCAb/ORKAAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAACQvEGP93a73Q6HQwhhPB4Ph0PDBgBAoHdmv9/PZrPn8u3t7eXlxbwBAEhcFmPs5cam0+nHx8dzWRTF8Xg0bwAABHpHG8uyL0+u16uLLgAAJK63H4lOJpP2sigKdQ4AgEDvTFVV7eVisTBsAADS19srLiGEpmne399DCPP5fDQaGTYAAAIdAAD4Bn9UBAAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0RwAAAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKA7AgAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAt0RAACAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6I4AAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AACQgIEj6LEs+3QI6Yjxp0MAAP7JG3QAAEhIFmN0CgAAkAhv0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINAB+NVuHQsAAAAADPK3nsaOoggAQQcAAAQdAAAEHQAAEHQAABB0AABA0AEAQNABAABBBwAABB0AAAQdAAAQdAAAEHQAAEDQAQBA0AEAAEEHAABBBwAABB0AAAQdAAAQdAAAEHQAAEDQAQAAQQcAAEEHAAAEHQAABB0AABB0AAAQdAAAQNABAEDQAQAAQQcAAEEHAAAEHQAABB0AABB0AABA0AEAQNABAABBBwAAQQcAAAQdAAAEHQAAEHQAABB0AABA0AEAQNABAABBBwAAQQcAAAQdAAAQdAAAEHQAAEDQAQBA0AEAAEEHAABBBwAABB0AAAQdAAAQdAAAEHQAAEDQAQBA0AEAAEEHAAAEHQAABB0AABB0AAAQdAAAQNABAEDQAQAAQQcAAEEHAAAEHQAABB0AABB0AAAQdAAAQNABAABBBwAAQQcAAAQdAAAEHQAAEHQAABB0AABA0AEAQNABAABBBwAAQQcAAAQdAAAEHQAAeAg6CZa0GoFfpwAAAABJRU5ErkJggg==){.bi
.x0 .y0 .w1 .h1}

::: {.c .x0 .y4d .w1 .h7}
::: {.t .m0 .x7 .h5 .ybf .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
uintptr\_t：\"%\" PRIuPTR
:::

::: {.t .m0 .x7 .h5 .yc0 .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
intmax\_t：\"%\" PRIdMAX
:::

::: {.t .m0 .x7 .h5 .yc1 .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
uintmax\_t：\"%\" PRIuMAX
:::

::: {.t .m0 .x1 .h3 .yc2 .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
PRI\*[相关的格式化描述符需要注意：它们是宏，这些宏会展开成特定平台上正确的printf描述符。因此，]{.ff1}
:::

::: {.t .m0 .x1 .h3 .yc3 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
不能这样使用：
:::

::: {.t .m0 .x1 .h3 .yc4 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
printf(\"Localnumber:%PRIdPTR\\n\\n\",someIntPtr);
:::

::: {.t .m0 .x1 .h3 .yc5 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
而因为它们是宏，应该这样使用：
:::

::: {.t .m0 .x1 .h3 .yc6 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
printf(\"Localnumber:%\"PRIdPTR\"\\n\\n\",someIntPtr);
:::

::: {.t .m0 .x1 .h3 .yc7 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
注意，需要将[%]{.ff2}写在格式化字符串内部，而类型描述符写在格式化字符串外面，这样所有相邻字符串会被
:::

::: {.t .m0 .x1 .h3 .yc8 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
预处理器连接成最终的字符串。
:::

::: {.t .m0 .x1 .h6 .yc9 .ff1 .fs2 .fc2 .sc0 .ls0 .ws0}
C99允许变量定义在任何地方
:::

::: {.t .m0 .x1 .h3 .yca .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
因此，不要这样写：
:::

::: {.t .m0 .x1 .h3 .ycb .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
voidtest(uint8\_tinput){uint32\_tb;if(input\>3){return;}b=input;}
:::

::: {.t .m0 .x1 .h3 .ycc .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
而应该这样写：
:::

::: {.t .m0 .x1 .h3 .ycd .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
voidtest(uint8\_tinput){if(input\>3){return;}uint32\_tb=input;}
:::

::: {.t .m0 .x1 .h3 .yce .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
警告：如果代码中有紧密的循环，请检查变量初始化的位置。有时疏散的定义可能会引发意外的性能问
:::

::: {.t .m0 .x1 .h3 .ycf .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
题。对于常规非快速路径代码（这是大部分情形），变量定义最好能够尽可能清晰，将类型定义写在初始
:::

::: {.t .m0 .x1 .h3 .yd0 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
化语句附近可以大大提高可读性。
:::

::: {.t .m0 .x1 .h6 .yd1 .ff1 .fs2 .fc2 .sc0 .ls0 .ws0}
C99允许在[for]{.ff2}循环中定义计数器
:::

::: {.t .m0 .x1 .h3 .yd2 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
因此，不要这样写：
:::

::: {.t .m0 .x1 .h3 .yd3 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
uint32\_ti;for(i=0;i\<10ipre\>
:::

::: {.t .m0 .x1 .h3 .yd4 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
而应该这样写：
:::

::: {.t .m0 .x1 .h3 .yd5 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
for(uint32\_ti=0;i\<10ipre\>
:::

::: {.t .m0 .x1 .h3 .yd6 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
一个例外：如果在循环完成后还需要复用计数器，显然不能将计数器定义在循环作用域内。
:::

::: {.t .m0 .x1 .h6 .yd7 .ff1 .fs2 .fc2 .sc0 .ls0 .ws0}
现代编译器支持[\#pragma once]{.ff2}
:::

::: {.t .m0 .x1 .h3 .yd8 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
因此，不要这样写：
:::

::: {.t .m0 .x1 .h3 .yd9 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
\#ifndefPROJECT\_HEADERNAME\#definePROJECT\_HEADERNAME\...\#endif/\*
:::

::: {.t .m0 .x1 .h3 .yda .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
PROJECT\_HEADERNAME\*/
:::

::: {.t .m0 .x1 .h3 .ydb .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
而应该这样写：
:::

::: {.t .m0 .x1 .h3 .ydc .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
\#pragmaonce
:::

::: {.t .m0 .x1 .h3 .ydd .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
\#pragma
once[告诉编译器只引入头文件一次，我们再也不需要在头文件中用三行预处理指令来确保。]{.ff1}
:::

::: {.t .m0 .x1 .h3 .yde .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
pragma预处理指令已经被几乎所有平台上的所有编译器支持，因此更加推崇。
:::

::: {.t .m0 .x1 .h3 .ydf .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
更多详情，参见[pragmaonce]{.fc1}的编译器支持列表。
:::

::: {.t .m0 .x1 .h6 .ye0 .ff1 .fs2 .fc2 .sc0 .ls0 .ws0}
C语言允许静态初始化自动分配数组
:::

::: {.t .m0 .x1 .h3 .ye1 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
因此，不要这些写：
:::

::: {.t .m0 .x1 .h3 .ye2 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
uint32\_tnumbers\[64\];memset(numbers,0,sizeof(numbers));
:::

::: {.t .m0 .x1 .h3 .ye3 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
而应该这样写：
:::
:::

[](https://en.wikipedia.org/wiki/Pragma_once){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:129.540085px;bottom:146.674805px;width:66.033275px;height:14.256836px;background-color:rgba(255,255,255,0.000001);"}
:::
:::

::: {.pi data="{\"ctm\":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}"}
:::
:::

::: {#pf7 .pf .w0 .h0 page-no="7"}
::: {.pc .pc7 .w0 .h0}
![](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA+AAAAXLCAIAAAAz/kHlAAAACXBIWXMAABYlAAAWJQFJUiTwAAAZLUlEQVR42uzasQ2AMBAEQR65AfdfpEs4UlISeKOZBpDOBCvLleQAAAB6OE0AAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgmwAAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEA3AQAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQCAx4YJgLuqZQToLJlGgH9zgw4AAI1UEisAAEATbtABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgW4CAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAC3QQAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAA+LlhAgCAN1UtI3wimXv8IUmcFgAANOGJCwAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AADY23jhG1XL0BtJphEAAL5SSawAAABNeOICAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAV7v2UgIADANRkEAN1L/IStiqSD8woyAkl3cIAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AADQYlhBq6r17/DJdEEAgNMBmcQWAADgEV5cAABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQCAazaXTiaLnOKqogAAAABJRU5ErkJggg==){.bi
.x0 .y0 .w1 .h1}

::: {.c .x0 .ye4 .w1 .ha}
::: {.t .m0 .x1 .h3 .ye5 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
uint32\_tnumbers\[64\]={0};
:::

::: {.t .m0 .x1 .h6 .ye6 .ff1 .fs2 .fc2 .sc0 .ls0 .ws0}
C语言允许静态初始化自动分配结构体
:::

::: {.t .m0 .x1 .h3 .ye7 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
因此，不要这样写：
:::

::: {.t .m0 .x1 .h3 .ye8 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
structthing{uint64\_tindex;uint32\_tcounter;};structthinglocalThing;void
:::

::: {.t .m0 .x1 .h3 .ye9 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
initThing(void){memset(&localThing,0,sizeof(localThing));}
:::

::: {.t .m0 .x1 .h3 .yea .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
而应该这样写：
:::

::: {.t .m0 .x1 .h3 .yeb .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
structthing{uint64\_tindex;uint32\_tcounter;};structthinglocalThing={0};
:::

::: {.t .m0 .x1 .h3 .yec .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
重要提示：如果结构体中有填充，使用[{0}]{.ff2}方式初始化无法将多余的填充字节置为0。例如，[struct
]{.ff2}
:::

::: {.t .m0 .x1 .h3 .yed .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
thing[结构体在]{.ff1}counter[字段之后有4字节填充（64位平台上），因为结构体需要按照字长对齐。这种情况]{.ff1}
:::

::: {.t .m0 .x1 .h3 .yee .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
下如果需要将整个结构体（包括未使用的填充字节）置为0,可以使用[memset(&localThing,
0, ]{.ff2}
:::

::: {.t .m0 .x1 .h3 .yef .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
sizeof(localThing))[因为]{.ff1}sizeof(localThing) == 16
字节[，即使可寻址内容只有]{.ff1}8 + 4 = 12 字节[。]{.ff1}
:::

::: {.t .m0 .x1 .h3 .yf0 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
如果需要重新初始化已经分配内存空间的结构体，可以定义一个全局空结构体，然后赋值：
:::

::: {.t .m0 .x1 .h3 .yf1 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
structthing{uint64\_tindex;uint32\_tcounter;};staticconststructthing
:::

::: {.t .m0 .x1 .h3 .yf2 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
localThingNull={0};...structthinglocalThing={.counter=3};...localThing=
:::

::: {.t .m0 .x1 .h3 .yf3 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
localThingNull;
:::

::: {.t .m0 .x1 .h3 .yf4 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
如果我们幸运的使用C99（或更新）版本的环境，我们可以使用复合字面量（compoundliterals），以
:::

::: {.t .m0 .x1 .h3 .yf5 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
取代保存一个全局空结构体。（参见[TheNewC:CompoundLiterals]{.fc1}）
:::

::: {.t .m0 .x1 .h3 .yf6 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
复合字面量允许直接将匿名结构体赋值给变量：
:::

::: {.t .m0 .x1 .h3 .yf7 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
localThing=(structthing){0};
:::

::: {.t .m0 .x1 .h6 .yf8 .ff1 .fs2 .fc2 .sc0 .ls0 .ws0}
C99增加可变长数组支持（C11将其设为可选）
:::

::: {.t .m0 .x1 .h3 .yf9 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
因此，不要这样写：
:::

::: {.t .m0 .x1 .h3 .yfa .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
uintmax\_tarrayLength=strtoumax(argv\[1\],NULL,10);void\*array\[\];array=
:::

::: {.t .m0 .x1 .h3 .yfb .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
malloc(sizeof(\*array)\*arrayLength);/\*记得当使用完数组后，释放其内存\*/
:::

::: {.t .m0 .x1 .h3 .yfc .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
而应该这样写：
:::

::: {.t .m0 .x1 .h3 .yfd .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
uintmax\_tarrayLength=strtoumax(argv\[1\],NULL,10);void\*array\[arrayLength\];/\*不需要
:::

::: {.t .m0 .x1 .h3 .yfe .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
释放数组内存\*/
:::

::: {.t .m0 .x1 .h3 .yff .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
重要警告：可变长数组（通常）和普通数组一样分配在栈上。如果我们不需要很多元素的数组，不要尝试
:::

::: {.t .m0 .x1 .h3 .y100 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
通过这种语法创建大数组。它不是python/ruby中的自增长列表。如果定义了一个数组的长度，相对于栈
:::

::: {.t .m0 .x1 .h3 .y101 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
空间比较大，应用程序将会发生可怕的事情（崩溃、安全问题）。可变长数组适用于长度小的一般用途场
:::

::: {.t .m0 .x1 .h3 .y102 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
景，而不应该大规模用于生产软件。如果有时需要使用3个元素的数组，而其他时候需要300万个元素的
:::

::: {.t .m0 .x1 .h3 .y103 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
数组，绝对不要使用可变长数组。
:::

::: {.t .m0 .x1 .h3 .y104 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
可变长数组语法还需要注意检查其可访问（或者做快速一次行检查），但还是需要考虑[危险的反模式]{.fc1}，因
:::

::: {.t .m0 .x1 .h3 .y105 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
为简单的忘记检查数组元素边界或者目标平台上没有足够的栈空间，都可能导致应用程序崩溃。
:::

::: {.t .m0 .x1 .h3 .y106 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
注意：使用可变长数组时，必须确保数组的确切长度在一个合理的大小。（例如小于几KB，有时在一些
:::

::: {.t .m0 .x1 .h3 .y107 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
平台上，最大栈大小只有4KB。）我们不能在栈上分配巨大的数组（百万级），但是如果是有的大小，使
:::

::: {.t .m0 .x1 .h3 .y108 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
用[C99可变长数组]{.fc1}相比于人工在堆上请求内存会更加方便。
:::

::: {.t .m0 .x1 .h3 .y109 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
另：上面示例代码中没有输入检查，因此用户可以通过分配一个巨大的可变长数组而让应用程序崩溃。到
:::

::: {.t .m0 .x1 .h3 .y10a .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
目前为止，[一些人]{.fc1}称可变长数组为反模式，但是如果我们能够加强边界检查，在一些场景下可能会有优
:::
:::

[](http://www.drdobbs.com/the-new-c-compound-literals/184401404){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:224.087740px;bottom:464.084470px;width:155.328280px;height:14.257330px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://twitter.com/grynspan/status/685509158024691712){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:455.204220px;bottom:174.438480px;width:63.031740px;height:14.257320px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://en.wikipedia.org/wiki/Variable-length_array){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:66.508316px;bottom:99.400879px;width:72.036301px;height:14.256836px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://twitter.com/comex/status/685423016981966848ps://en.wikipedia.org/wiki/Variable-length_array){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:108.529495px;bottom:61.881836px;width:31.515885px;height:14.257324px;background-color:rgba(255,255,255,0.000001);"}
:::
:::

::: {.pi data="{\"ctm\":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}"}
:::
:::

::: {#pf8 .pf .w0 .h0 page-no="8"}
::: {.pc .pc8 .w0 .h0}
![](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA+AAAAXLCAIAAAAz/kHlAAAACXBIWXMAABYlAAAWJQFJUiTwAAAZEElEQVR42uzaMQ6DMBBE0d3IF/D9D8kRhiJ9ZKVa0Hs1BYybL4tOUgAAwAwfEwAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AADwy5r/it2Xc+Ir2UYAAN7NDToAAAzSSawAAABDuEEHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABLoJAABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdBMAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQCAqqpaJgAA4FD3ZYT/JPt05CT2AgCAIfziAgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAwKutk4e6r+d+YbIdMwAAT+EGHQAABukkVgAAgCHcoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAC3QQAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAS6CQAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIduNutAwEAAAAAQf7WKwxQFAEACDoAAAg6AAAg6AAAIOgAAICgAwCAoAMAAIIOAACCDgAACDoAAAg6AAAg6AAAIOgAAICgAwAAgg4AAIIOAAAIOgAACDoAACDoAAAg6AAAgKADAICgAwAAgg4AAIIOAAAIOgAACDoAACDoAACAoAMAgKADAACCDgAAgg4AAAg6AAAIOgAAIOgAACDoAACAoAMAgKADAACCDgAAgg4AAAg6AAAg6AAAIOgAAICgAwCAoAMAAIIOAACCDgAACDoAAAg6AAAg6AAAIOgAAICgAwCAoAMAAIIOAAAIOgAACDoAACDoAAAg6AAAgKADAICgAwAAgg4AAIIOAAAIOgAACDoAACDoAAAg6AAAgKADAACCDgAAgg4AACwBIswgjVVZc88AAAAASUVORK5CYII=){.bi
.x0 .y0 .w1 .h1}

::: {.c .x0 .y4d .w1 .h7}
::: {.t .m0 .x1 .h3 .y10b .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
势。
:::

::: {.t .m0 .x1 .h6 .y10c .ff1 .fs2 .fc2 .sc0 .ls0 .ws0}
C99允许将指针参数标记为非重叠
:::

::: {.t .m0 .x1 .h3 .y10d .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
参见[restrict关键字说明]{.fc1}（通常该关键字为[\_\_restrict]{.ff2}）。
:::

::: {.t .m0 .x1 .h6 .y10e .ff1 .fs2 .fc2 .sc0 .ls0 .ws0}
参数类型
:::

::: {.t .m0 .x1 .h3 .y10f .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
如果一个函数接受任意输入类型和一个数据长度，不要限制这个参数的类型。
:::

::: {.t .m0 .x1 .h3 .y110 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
因此，不要这样写：
:::

::: {.t .m0 .x1 .h3 .y111 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
voidprocessAddBytesOverflow(uint8\_t\*bytes,uint32\_tlen){for(uint32\_ti=0;i\<leni
:::

::: {.t .m0 .x1 .h3 .y112 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
bytes=\"bytes\[i\];\"pre\>
:::

::: {.t .m0 .x1 .h3 .y113 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
而应该这样写：
:::

::: {.t .m0 .x1 .h3 .y114 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
voidprocessAddBytesOverflow(void\*input,uint32\_tlen){uint8\_t\*bytes=input;for
:::

::: {.t .m0 .x1 .h3 .y115 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
(uint32\_ti=0;i\<lenibytes=\"bytes\[i\];\"pre\>
:::

::: {.t .m0 .x1 .h3 .y116 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
函数的入参用于描述代码的接口行为，而不是代码中是如何处理这些参数的。上面示例代码中的接口表
:::

::: {.t .m0 .x1 .h3 .y117 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
示"接受一个字节数组及其长度"，因此无需限制调用者仅能传入uint8\_t字节流。可能调用者甚至想传
:::

::: {.t .m0 .x1 .h3 .y118 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
入老式的[char \*]{.ff2}类型或者其他未预期的值。
:::

::: {.t .m0 .x1 .h3 .y119 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
通过将入参定义为[void
\*]{.ff2}，然后在函数内部重新赋值或者类型转换成实际类型，可以减少函数调用者对函
:::

::: {.t .m0 .x1 .h3 .y11a .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
数内部抽象的猜测。
:::

::: {.t .m0 .x1 .h3 .y11b .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
一些读者指出示例可能会存在对齐问题，但是我们是在访问入参中的每个字节元素，因此不会有问题。如
:::

::: {.t .m0 .x1 .h3 .y11c .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
果我们需要将入参转换成更宽的类型，就需要注意对齐问题。对于处理跨平台对齐问题，参见[未对齐的内]{.fc1}
:::

::: {.t .m0 .x1 .h3 .y11d .ff1 .fs0 .fc1 .sc0 .ls0 .ws0}
存访问[。（提醒：这个网页的主要内容不是关于C语言跨硬件架构的复杂性，因此完全理解其中的示例需]{.fc0}
:::

::: {.t .m0 .x1 .h3 .y11e .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
要一些外部的知识和经验。）
:::

::: {.t .m0 .x1 .h6 .y11f .ff1 .fs2 .fc2 .sc0 .ls0 .ws0}
返回值类型
:::

::: {.t .m0 .x1 .h3 .y120 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
C99提供了头文件，其中定义了[true]{.ff2}为[1]{.ff2}，[false]{.ff2}为[0]{.ff2}。
:::

::: {.t .m0 .x1 .h3 .y121 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
对于标识成功/失败的返回值类型，函数应该返回[true]{.ff2}或者[false]{.ff2}，而不是一个[int32\_t]{.ff2}的数值来人为指定[1]{.ff2}
:::

::: {.t .m0 .x1 .h3 .y122 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
和[0]{.ff2}（或者更糟糕的使用[1]{.ff2}和[-1]{.ff2}），调用者很难确认[0]{.ff2}代表成功还是失败。
:::

::: {.t .m0 .x1 .h3 .y123 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
如果函数会修改入参，且可能修改成无效值，不要返回修改后的指针，而应该将API中可能会被修改成无
:::

::: {.t .m0 .x1 .h3 .y124 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
效的参数都改成指针的指针。将接口定义为"对于一些调用，返回值会使得入参无效"在大规模使用的时
:::

::: {.t .m0 .x1 .h3 .y125 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
候很容易出错。
:::

::: {.t .m0 .x1 .h3 .y126 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
因此，不要这样写：
:::

::: {.t .m0 .x1 .h3 .y127 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
void\*growthOptional(void\*grow,size\_tcurrentLen,size\_tnewLen){if(newLen\>currentLen)
:::

::: {.t .m0 .x1 .h3 .y128 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
{void\*newGrow=realloc(grow,newLen);if(newGrow){/\*resizesuccess\*/
:::

::: {.t .m0 .x1 .h3 .y129 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
grow=newGrow;}else{/\*resizefailed,freeexistingandsignalfailurethrough
:::

::: {.t .m0 .x1 .h3 .y12a .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
NULL\*/free(grow);grow=NULL;}}returngrow;}
:::

::: {.t .m0 .x1 .h3 .y12b .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
而应该这样写：
:::

::: {.t .m0 .x1 .h3 .y12c .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
/\*返回值：\*-如果newLen大于currentLen，且尝试调整内存，返回'true'\*-'true'不表示内
:::

::: {.t .m0 .x1 .h3 .y12d .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
存扩大成功，仍然需要通过'\*\_grow'的值来判断是否成功\*-如果newLen小于等于currentLen返
:::

::: {.t .m0 .x1 .h3 .y12e .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
回'false'\*/boolgrowthOptional(void\*\*\_grow,size\_tcurrentLen,size\_tnewLen){void\*grow
:::

::: {.t .m0 .x1 .h3 .y12f .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
=\*\_grow;if(newLen\>currentLen){void\*newGrow=realloc(grow,newLen);if
:::
:::

[](https://en.wikipedia.org/wiki/Restrict){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:77.013611px;bottom:729.718750px;width:87.043884px;height:14.257320px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://www.kernel.org/doc/Documentation/unaligned-memory-access.txt){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:56.003025px;bottom:419.062010px;width:483.243555px;height:33.016600px;background-color:rgba(255,255,255,0.000001);"}
:::
:::

::: {.pi data="{\"ctm\":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}"}
:::
:::

::: {#pf9 .pf .w0 .h0 page-no="9"}
::: {.pc .pc9 .w0 .h0}
![](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA+AAAAXLCAIAAAAz/kHlAAAACXBIWXMAABYlAAAWJQFJUiTwAAAZhElEQVR42uzdMYrCQBSA4cxiZ2UR8BTxEslNbJMjBHIBK8+Sg3gJixQ22glvCyHIVu4ui0P2+ypHbPJe8xMGTBFRAAAAefgwAgAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAt0IAABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdCMAAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AAPhbKyMAmKV0MYQcRGwMAfi3vEEHAICMpIgwBQAAyIQ36AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBANwIAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAALdCAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAgKVZvfKjlC4m9bqIjSEAAPAzKSJMAQAAMuGKCwAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAL9N+73+ziOTdM0TTOO4+12s2wAAPKXImKRD3Y8Htu2nY/DMPR9b98AAAj099jtdqfTaT5ut9vz+WzfAAAI9Dc9WEpfvrler+v12soBAMjZYu+gd133fKzrWp0DACDQ32a/31dV9fhcVdXhcLBsAADyt9grLg/TNBVFUZalTQMAINABAIDv8UdFAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAADw2W4dyAAAAAAM8re+x1cUIegAACDoAACAoAMAgKADAACCDgAAgg4AAAg6AAAIOgAAIOgAACDoAACAoAMAgKADAACCDgAACDoAAAg6AAAg6AAAIOgAAICgAwCAoAMAAIIOAACCDgAACDoAAAg6AAAg6AAAIOgAAICgAwAAgg4AAIIOAAAIOgAACDoAACDoAAAg6AAAgKADAICgAwAAgg4AAIIOAAAIOgAACDoAACDoAACAoAMAgKADAACCDgAAgg4AAAg6AAAIOgAAIOgAACDoAACAoAMAgKADAACCDgAAgg4AAAg6AAAg6AAAIOgAAICgAwCAoAMAAIIOAACCDgAACDoAAAg6AAAg6AAAIOgAAICgAwCAoAMAAIIOAAAIOgAACDoAACDoAAAg6AAAgKADAICgAwAAgg4AAIIOAAAIOgAA7AWq8k1R3ltDawAAAABJRU5ErkJggg==){.bi
.x0 .y0 .w1 .h1}

::: {.c .x0 .y4d .w1 .h7}
::: {.t .m0 .x1 .h3 .y130 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
(newGrow){/\*调整大小成功\*/\*\_grow=newGrow;returntrue;}/\*
:::

::: {.t .m0 .x1 .h3 .y131 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
调整大小失败\*/free(grow);\*\_grow=NULL;/\*对于这个函数，返回'true'不代表成
:::

::: {.t .m0 .x1 .h3 .y132 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
功，\*它只表示'尝试扩展'\*/returntrue;}returnfalse;}
:::

::: {.t .m0 .x1 .h3 .y133 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
或者，更好的可以这样写：
:::

::: {.t .m0 .x1 .h3 .y134 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
typedefenumgrowthResult{GROWTH\_RESULT\_SUCCESS=1,
:::

::: {.t .m0 .x1 .h3 .y135 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
GROWTH\_RESULT\_FAILURE\_GROW\_NOT\_NECESSARY,
:::

::: {.t .m0 .x1 .h3 .y136 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
GROWTH\_RESULT\_FAILURE\_ALLOCATION\_FAILED}growthResult;growthResult
:::

::: {.t .m0 .x1 .h3 .y137 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
growthOptional(void\*\*\_grow,size\_tcurrentLen,size\_tnewLen){void\*grow=\*\_grow;if
:::

::: {.t .m0 .x1 .h3 .y138 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
(newLen\>currentLen){void\*newGrow=realloc(grow,newLen);if(newGrow){
:::

::: {.t .m0 .x1 .h3 .y139 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
/\*调整大小成功\*/\*\_grow=newGrow;returnGROWTH\_RESULT\_SUCCESS;}
:::

::: {.t .m0 .x1 .h3 .y13a .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
/\*调整大小失败，无需移除数据，因为我们已经能够提示失败\*/return
:::

::: {.t .m0 .x1 .h3 .y13b .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
GROWTH\_RESULT\_FAILURE\_ALLOCATION\_FAILED;}return
:::

::: {.t .m0 .x1 .h3 .y13c .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
GROWTH\_RESULT\_FAILURE\_GROW\_NOT\_NECESSARY;}
:::

::: {.t .m0 .x1 .h6 .y13d .ff1 .fs2 .fc2 .sc0 .ls0 .ws0}
代码格式化
:::

::: {.t .m0 .x1 .h3 .y13e .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
编码风格既非常重要又一文不值。
:::

::: {.t .m0 .x1 .h3 .y13f .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
如果你的项目有50页的编码风格指南，没有人会帮助你。但是，如果你的代码可读性非常差，没有人会
:::

::: {.t .m0 .x1 .h3 .y140 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
希望帮助你。
:::

::: {.t .m0 .x1 .h3 .y141 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
这个问题的解决方案是总是使用自动化代码格式化工具。
:::

::: {.t .m0 .x1 .h3 .y142 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
2016年唯一能够能使用的C代码格式化工具是[clang-format]{.fc1}。clang-format拥有格式化C代码的最佳默
:::

::: {.t .m0 .x1 .h3 .y143 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
认值，并且仍然处于活跃开发阶段。
:::

::: {.t .m0 .x1 .h3 .y144 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
下面示例是我运行clang-format时的首选脚本，它包含一些不错的参数：
:::

::: {.t .m0 .x1 .h3 .y145 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
\#!/usr/bin/envbashclang-format-style=\"{BasedOnStyle:llvm,IndentWidth:4,
:::

::: {.t .m0 .x1 .h3 .y146 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
AllowShortFunctionsOnASingleLine:None,KeepEmptyLinesAtTheStartOfBlocks:false}\"\"\$@\"
:::

::: {.t .m0 .x1 .h3 .y147 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
然后调用这个脚本（假设这个脚本被命令成[cleanup-format]{.ff2}）：
:::

::: {.t .m0 .x1 .h3 .y148 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
matt\@foo:\~/repos/badcode%cleanup-format-i\*.{c,h,cc,cpp,hpp,cxx}
:::

::: {.t .m0 .x1 .h3 .y149 .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
-i[参数会将格式化之后的内容覆盖到原文件中，而不是写入新文件或者创建备份文件。]{.ff1}
:::

::: {.t .m0 .x1 .h3 .y14a .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
如果有很多文件，可以并行递归处理整个源码树：
:::

::: {.t .m0 .x1 .h3 .y14b .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
\#!/usr/bin/envbash\#注意：clang-tidy命令一次只能接受一个文件，但是我们可以在不相交集合中并
:::

::: {.t .m0 .x1 .h3 .y14c .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
行执行。find.\\(-name\\\*.c-or-name\\\*.cpp-or-name\\\*.cc\\)\|xargs-n1-P4cleanup-tidy\#
:::

::: {.t .m0 .x1 .h3 .y14d .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
clang-format命令一次运行能够接受多个文件，但是为了防止内存的过度使用，\#我们限制位为一次最
:::

::: {.t .m0 .x1 .h3 .y14e .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
多12个文件。find.\\(-name\\\*.c-or-name\\\*.cpp-or-name\\\*.cc-or-name\\\*.h\\)\|xargs-n12-
:::

::: {.t .m0 .x1 .h3 .y14f .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
P4cleanup-format-i
:::

::: {.t .m0 .x1 .h3 .y150 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
现在，[cleanup-tidy]{.ff2}脚本修改后的内容为：
:::

::: {.t .m0 .x1 .h3 .y151 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
\#!/usr/bin/envbashclang-tidy\\-fix\\-fix-errors\\-header-filter=.\*\\\--
:::

::: {.t .m0 .x1 .h3 .y152 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
checks=readability-braces-around-statements,misc-macro-parentheses\\\$1\\\---I.
:::

::: {.t .m0 .x1 .h3 .y153 .ff1 .fs0 .fc1 .sc0 .ls0 .ws0}
clang-tidy[是策略驱动的代码重构工具。上面示例中的参数开启了两个修正：]{.fc0}
:::

::: {.t .m0 .x7 .h5 .y154 .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
readability-braces-around-statements：强制所有的if、while、for语句体都使用大括号括
:::

::: {.t .m0 .x8 .h5 .y155 .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
起来
:::
:::

[](http://clang.llvm.org/docs/ClangFormat.html){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:266.108920px;bottom:429.567380px;width:65.282900px;height:14.257330px;background-color:rgba(255,255,255,0.000001);"}
:::

[](http://clang.llvm.org/extra/clang-tidy/){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:56.003025px;bottom:108.405273px;width:50.275341px;height:14.257325px;background-color:rgba(255,255,255,0.000001);"}
:::
:::

::: {.pi data="{\"ctm\":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}"}
:::
:::

::: {#pfa .pf .w0 .h0 page-no="a"}
::: {.pc .pca .w0 .h0}
![](data:image/png;base64,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EOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAC3REAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDojgAAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEA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){.bi
.x0 .y0 .w1 .h1}

::: {.c .x0 .y4d .w1 .h7}
::: {.t .m0 .x4 .h3 .y156 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
C语言中对于循环和条件后面的单行语句有"可选的大括号"是一个历史事故。在编写
:::

::: {.t .m0 .x5 .h3 .y157 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
现代代码时，在循环和条件语句之后不使用大括号是不可原谅的行为。不要试图以"但是，
:::

::: {.t .m0 .x5 .h3 .y158 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
编译器支持这样的写法！"为由来争辩，这对于代码的可读性、可维护性、易懂性没有任何
:::

::: {.t .m0 .x5 .h3 .y159 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
好处。我们的代码不是用来取悦你的编译器，而是用来取悦将来维护代码的人，那时没有人
:::

::: {.t .m0 .x5 .h3 .y15a .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
记得当时为什么会存在这样的代码。
:::

::: {.t .m0 .x7 .h5 .y15b .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
misc-macro-parentheses：自动为宏的所有参数加上括号
:::

::: {.t .m0 .x1 .h3 .y15c .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
clang-tidy[命令在它正常工作时非常优秀，但是对于一些复杂的代码可能会卡壳。还有，]{.ff1}clang-tidy[命令]{.ff1}
:::

::: {.t .m0 .x1 .h3 .y15d .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
不会对代码进行格式化，因此在整理完成之后，还需要运行[clang-format]{.ff2}命令来对齐新的大括号和重新推
:::

::: {.t .m0 .x1 .h3 .y15e .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
导宏。
:::

::: {.t .m0 .x1 .h6 .y15f .ff1 .fs2 .fc2 .sc0 .ls0 .ws0}
可读性
:::

::: {.t .m0 .x1 .h3 .y160 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
写作似乎从这里开始减慢了......
:::

::: {.t .m0 .x1 .h8 .y161 .ff1 .fs3 .fc2 .sc0 .ls0 .ws0}
注释
:::

::: {.t .m0 .x1 .h3 .y162 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
代码逻辑应该自包含在代码文件中。
:::

::: {.t .m0 .x1 .h8 .y163 .ff1 .fs3 .fc2 .sc0 .ls0 .ws0}
文件结构
:::

::: {.t .m0 .x1 .h3 .y164 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
尽可能将源码行限制在1000行以内（1500行已经是非常糟糕的情况了）。如果测试代码也包含在源码中
:::

::: {.t .m0 .x1 .h3 .y165 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
（为了测试静态函数等情况），尽可能调整这种结构。
:::

::: {.t .m0 .x1 .h6 .y166 .ff1 .fs2 .fc2 .sc0 .ls0 .ws0}
杂项想法
:::

::: {.t .m0 .x1 .h8 .y167 .ff1 .fs3 .fc2 .sc0 .ls0 .ws0}
绝不使用[malloc]{.ff2}
:::

::: {.t .m0 .x1 .h3 .y168 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
我们应该总是使用[calloc]{.ff2}。获取清零的内存没有性能损失。如果不喜欢[calloc(object
count, size per ]{.ff2}
:::

::: {.t .m0 .x1 .h3 .y169 .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
object)[的函数原型，我们可以将其包装成]{.ff1}\#define mycalloc(N)
calloc(1, N)[。]{.ff1}
:::

::: {.t .m0 .x1 .h3 .y16a .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
对此读者进行了一些评论：
:::

::: {.t .m0 .x7 .h5 .y16b .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
calloc在巨大内存申请的场景下，的确会有性能影响
:::

::: {.t .m0 .x7 .h5 .y16c .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
calloc在一些奇怪的平台上（最小嵌入式系统、游戏主机、30年前的旧硬件等）的确会有性能
:::

::: {.t .m0 .x8 .h5 .y16d .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
影响
:::

::: {.t .m0 .x3 .h3 .y16e .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
对[calloc(element count, size of each
element)]{.ff2}原型进行包装不总是一个好主意
:::

::: {.t .m0 .x3 .h3 .y16f .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
避免使用[malloc()]{.ff2}的很大一个因素是其不进行整数溢出检查，这是一个潜在的安全风险
:::

::: {.t .m0 .x3 .h3 .y170 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
使用[calloc]{.ff2}函数分配内存可以避免valgrind对于未初始化内存潜在读写的警告，因为它会在分
:::

::: {.t .m0 .x8 .h3 .y171 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
配内存时自动初始化为[0]{.ff2}
:::

::: {.t .m0 .x1 .h3 .y172 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
以上是使用[calloc]{.ff2}的优势，同时我们还需要进行性能测试和回归测试，以确定跨编译器、平台、操作系统
:::

::: {.t .m0 .x1 .h3 .y173 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
和硬件设备上的性能。
:::

::: {.t .m0 .x1 .h3 .y174 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
直接使用[calloc()]{.ff2}而非其包装的优势是，不同于[malloc()]{.ff2}，[calloc()]{.ff2}函数能够检查整数溢出，因为它会将
:::

::: {.t .m0 .x1 .h3 .y175 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
其参数做乘法，以确认实际分配的大小。如果直至分配很小的内存，对[calloc()]{.ff2}进行包装没有问题。如果
:::

::: {.t .m0 .x1 .h3 .y176 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
需要分配潜在无边界数据流，可能需要使用[calloc(element count, size of
each element)]{.ff2}的原型以方
:::

::: {.t .m0 .x1 .h3 .y177 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
便使用。
:::

::: {.t .m0 .x1 .h3 .y178 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
没有建议是可以普适的，试图给出准确完美的通用建议，最终会变琛阅读一本类似语言规范的书。
:::

::: {.t .m0 .x1 .h3 .y179 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
对于[calloc()]{.ff2}如何无损耗提供干净的内存，参见这些文章：
:::

::: {.t .m0 .x3 .h3 .y17a .ff1 .fs0 .fc1 .sc0 .ls0 .ws0}
关于calloc()和零页有趣的基准测试
:::
:::

[](https://blogs.fau.de/hager/archives/825){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:107.779121px;bottom:60.381348px;width:161.331289px;height:14.256836px;background-color:rgba(255,255,255,0.000001);"}
:::
:::

::: {.pi data="{\"ctm\":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}"}
:::
:::

::: {#pfb .pf .w0 .h0 page-no="b"}
::: {.pc .pcb .w0 .h0}
![](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA+AAAAXLCAIAAAAz/kHlAAAACXBIWXMAABYlAAAWJQFJUiTwAAAan0lEQVR42uzdsWpUURiFUX+5EAgYvCSVomIRKzsRCxGsLKxsBEHfx86n8Bm0sAmIpQEtBdHG2EiuxEpQt0UaSYRE4zgnZ9Yqhykm+wh+OVwmleQEAADQhpMmAAAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAADRk6PUH+/b9x+v3n59ubj3eeLe2snTvxoU7186dXV125AAAtKySdPmDbb7dvv/oxa+vrK0sPX94y5EDANCybh9xebq5teeVTztf33zYceQAAAj0OXi88W7/i89efXTkAAAI9Dm4dObU/hcvnz/tyAEAEOhzcPf6hf0vXl1fdeQAAAj0Obh95cyeS/QHNy8uLw2OHACAlnX7LS67tr98ffJy69za8tX1VXUOAIBABwAA/oC/JAoAAAIdAAAQ6AAAINABAACBDgAAx5BvHpyhqskILJRkNAIAHLUhfc0iAAC0wyMuAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEA3AQAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAADM3tD+R6yanBMcKBmNAAAdcIMOAAANqSRWAACARrhBBwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoA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BwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwCAPg0m+DtVkxEOlIyOY0GOAAD4V9ygAwBAQyqJFQAAoBFu0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAACzNJiAY6FqMkI7ktEIADCr7EliBQAAaIRHXAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAYAEMJgCAw6iajHBEyWgEOJAbdAAAaEglsQIAADTCDToAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAABdGw7zpqrJUsdRMhoBAOB4qSRWAACARnjEBQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAWDjDYd5UNVlqLpLRCAAAC6WSWAEAABrhERcAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAC6NhzmTVWTpWYqGY0AAMAJN+jAz3bs0AYAEAaiaJqwAPsPyQiHRWIgFe/pqlM/BQBaqSRWAACAJnzQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAMAf4+aoalnqhWQaAQCAkw86AAA0UkmsAAAATfigAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAwAMbXAmcjTRUWlkAAAAASUVORK5CYII=){.bi
.x0 .y0 .w1 .h1}

::: {.c .x0 .ye4 .w1 .ha}
::: {.t .m0 .x3 .h3 .y17b .ff1 .fs0 .fc1 .sc0 .ls0 .ws0}
虚拟内存管理中的写时复制
:::

::: {.t .m0 .x1 .h3 .y17c .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
我还是坚持我的立场，建议在2016年的大部分场景下（假定：x64目标平台，一般大小的数据，不包括人
:::

::: {.t .m0 .x1 .h3 .y17d .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
体基因数量级的数据）总是使用[calloc()]{.ff2}函数。任何和"期望"的偏离，会将我们拖入"领域知识"，这
:::

::: {.t .m0 .x1 .h3 .y17e .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
不是我们今天谈论的范围。
:::

::: {.t .m0 .x1 .h3 .y17f .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
注：通过调用[calloc()]{.ff2}申请到的预先清零内存是一次性的。如果使用[realloc()]{.ff2}函数来扩展[calloc()]{.ff2}函数
:::

::: {.t .m0 .x1 .h3 .y180 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
分配的内存，是没有清零的内存。扩展的内存仍然会被内核提供常规未初始化内容填充。如果需要在调用
:::

::: {.t .m0 .x1 .h3 .y181 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
realloc之后将内存置零，必须针对扩展的内存手工调用[memset()]{.ff2}函数。
:::

::: {.t .m0 .x1 .h8 .y182 .ff1 .fs3 .fc2 .sc0 .ls0 .ws0}
（如果可以避免）不要使用memset
:::

::: {.t .m0 .x1 .h3 .y183 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
当可以静态初始化结构（或数组）为零（或者通过内联复合字面量赋值为零，或者通过赋值为预先置零的
:::

::: {.t .m0 .x1 .h3 .y184 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
全局变量）时，绝不要使用[memset(ptr, 0, len)]{.ff2}。
:::

::: {.t .m0 .x1 .h3 .y185 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
不过，如果需要将结构体填充字节置零，[memset()]{.ff2}是唯一选择。（因为[{0}]{.ff2}语法只能设置定义的字段，而
:::

::: {.t .m0 .x1 .h3 .y186 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
无法填充未定义的填充字节。）
:::

::: {.t .m0 .x1 .h4 .y187 .ff1 .fs1 .fc2 .sc0 .ls0 .ws0}
了解更多
:::

::: {.t .m0 .x1 .h3 .y188 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
参见[固定宽度整数类型（从C99）]{.fc1}
:::

::: {.t .m0 .x1 .h3 .y189 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
参见苹果公司的[让64位代码更加清晰]{.fc1}
:::

::: {.t .m0 .x1 .h3 .y18a .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
参见[跨架构C类型大小]{.fc1}------除非我们能够记住整个表格中的每一行并应用到代码的每一行，我们都应该使
:::

::: {.t .m0 .x1 .h3 .y18b .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
用明确定义宽度的整数，绝不使用char/short/int/long这些内置存储类型。
:::

::: {.t .m0 .x1 .h3 .y18c .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
参见[size\_t和ptrdiff\_t]{.fc1}
:::

::: {.t .m0 .x1 .h3 .y18d .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
参见[安全编码]{.fc1}。如果我们希望写出完美的代码，只需记住其中的上千个简单示例。
:::

::: {.t .m0 .x1 .h3 .y18e .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
参见来自Inria（法国国家信息与自动化研究所）的JensGustedt编写的[现代C语言]{.fc1}。
:::

::: {.t .m0 .x1 .h3 .y18f .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
对于C11对Unicode支持的细节，参见[理解C/C++中的字符/字符串字面量]{.fc1}
:::

::: {.t .m0 .x1 .h6 .y190 .ff1 .fs2 .fc2 .sc0 .ls0 .ws0}
结尾
:::

::: {.t .m0 .x1 .h3 .y191 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
大规模的编写正确的代码基本上是不可能的。我们有多种操作系统、运行时环境、程序库和硬件平台需要
:::

::: {.t .m0 .x1 .h3 .y192 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
考虑，更不用说小概率的内存随机位反转、块设备故障等。
:::

::: {.t .m0 .x1 .h3 .y193 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
我们能做最好的是编写简单易懂的代码，尽可能减少间接代码和未注释的魔术代码。
:::

::: {.t .m0 .x1 .h3 .y194 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
-Matt---[\@mattsta]{.fc1}---[☁[mattsta]{.ff1}]{.ff3 .fc1}
:::

::: {.t .m0 .x1 .h6 .y195 .ff1 .fs2 .fc2 .sc0 .ls0 .ws0}
归属
:::

::: {.t .m0 .x1 .h3 .y196 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
本文在twitter和HackerNews上都有讨论，因此需要读者都有帮忙，指出瑕疵或有偏见的想法，我在此
:::

::: {.t .m0 .x1 .h3 .y197 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
公布一下。
:::

::: {.t .m0 .x1 .h3 .y198 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
首先，JeremyFaller、[SosSosowski]{.fc1}、MartinHeistermann和其他一些读者很友好的指出文中
:::

::: {.t .m0 .x1 .h3 .y199 .ff2 .fs0 .fc0 .sc0 .ls0 .ws0}
memset()[示例的问题，并且给予修正。]{.ff1}
:::

::: {.t .m0 .x1 .h3 .y19a .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
MartinHeistermann同时指出[localThing =
localThingNull]{.ff2}示例也存在问题。
:::

::: {.t .m0 .x1 .h3 .y19b .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
文章开头关于C语言能不用就不用的引用，来自聪明的互联网智者[\@badboy\_]{.fc1}。
:::

::: {.t .m0 .x1 .h3 .y19c .ff1 .fs0 .fc1 .sc0 .ls0 .ws0}
RemiGacogne[指出我忘了[-Wextra]{.ff2}参数。]{.fc0}
:::

::: {.t .m0 .x1 .h3 .y19d .ff1 .fs0 .fc1 .sc0 .ls0 .ws0}
LeviPearson[指出gcc-5默认使用gnu11标准，而不是c89标准，同时澄清了clang的默认标准。]{.fc0}
:::

::: {.t .m0 .x1 .h3 .y19e .ff1 .fs0 .fc1 .sc0 .ls0 .ws0}
Christopher[指出[-O2]{.ff2}和[-O3]{.ff2}对比章节应该更加清晰。]{.fc0}
:::

::: {.t .m0 .x1 .h3 .y19f .ff1 .fs0 .fc1 .sc0 .ls0 .ws0}
ChadMiller[指出我在处理clang-format脚本参数时偷懒了。]{.fc0}
:::
:::

[](https://en.wikipedia.org/wiki/Copy-on-write#Copy-on-write_in_virtual_memory_management){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:107.779121px;bottom:775.491700px;width:126.063529px;height:14.256840px;background-color:rgba(255,255,255,0.000001);"}
:::

[](http://en.cppreference.com/w/c/types/integer){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:77.013611px;bottom:524.114750px;width:135.068089px;height:14.257320px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://developer.apple.com/library/mac/documentation/Darwin/Conceptual/64bitPorting/MakingCode64-BitClean/MakingCode64-BitClean.html){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:129.540085px;bottom:505.355470px;width:96.048415px;height:14.256830px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=4374){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:77.013611px;bottom:486.595700px;width:80.290466px;height:14.257330px;background-color:rgba(255,255,255,0.000001);"}
:::

[](http://www.viva64.com/en/a/0050/){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:77.013611px;bottom:449.077150px;width:78.039337px;height:14.256830px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://www.securecoding.cert.org/confluence/display/c/SEI+CERT+C+Coding+Standard){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:77.013611px;bottom:430.317380px;width:42.021179px;height:14.257330px;background-color:rgba(255,255,255,0.000001);"}
:::

[](http://icube-icps.unistra.fr/img_auth.php/d/db/ModernC.pdf){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:383.918300px;bottom:411.558110px;width:48.774570px;height:14.257320px;background-color:rgba(255,255,255,0.000001);"}
:::

[](http://www.dotslashzero.net/2014/08/22/understanding-characterstring-literals-in-cc/){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:232.341900px;bottom:392.798830px;width:165.083210px;height:14.256830px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://twitter.com/mattsta){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:101.776093px;bottom:290.747070px;width:48.774581px;height:14.257320px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://github.com/mattsta){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:168.559750px;bottom:290.747070px;width:47.273840px;height:14.257320px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://twitter.com/Sosowski/status/685431663501926400){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:163.307098px;bottom:207.455080px;width:66.783662px;height:14.257320px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://twitter.com/badboy_){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:356.904690px;bottom:149.676270px;width:54.027230px;height:14.256835px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://twitter.com/rgacogne/status/685390620723154944){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:56.003025px;bottom:130.916504px;width:73.537060px;height:14.257324px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://twitter.com/pineal_servo/status/685393454487056384){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:56.003025px;bottom:111.406738px;width:63.031765px;height:14.257325px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://twitter.com/shrydar/status/685375992114757632){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:56.003025px;bottom:92.647461px;width:59.279881px;height:14.256836px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://twitter.com/chadmiller/status/685469896914919424){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:56.003025px;bottom:73.137695px;width:57.779125px;height:14.256836px;background-color:rgba(255,255,255,0.000001);"}
:::
:::

::: {.pi data="{\"ctm\":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}"}
:::
:::

::: {#pfc .pf .w0 .h0 page-no="c"}
::: {.pc .pcc .w0 .h0}
![](data:image/png;base64,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0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAMAljZ1DVctSL5JMIwAA8M0NOgAANFJJrAAAAE24QQcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAXMnYOVS1LMUjkmkEAIAdbtABAKCRSmIFAABowg06AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINBNAAAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAg0AEAQKADAAD/GzuHqpal7iOZRjiR76mHHICL/E9PYgUAAGjCKy4AACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQDcBAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAPQ3dg5VLUuxKZlv/Ome1UM/OADgp2eSWAEAAJrwigsAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAAvMUxwPVXrtn97Mj0AAMDZLZfECgAA0IRXXAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAALi0sXOoalmKHck0AgDAI9ygAwBAI5XECgAA0IQbdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOwFe7dSwAAAAAMMjfehT7iiIABB0AABB0AABA0AEAQNABAABBBwAAQQcAAAQdAAAEHQAAEHQAABB0AABA0AEAQNABAABBBwAAQQcAAAQdAAAQdAAAEHQAAEDQAQBA0AEAAEEHAABBBwAABB0AAAQdAAAQdAAAEHQAAEDQAQBA0AEAAEEHAAAEHQAABB0AABB0AAAQdAAAQNABAEDQAQAAQQcAAEEHAAAEHQAABB0AABB0AAAQdAAAQNABAABBBwAAQQcAAAQdAAAEHQAAEHQAABB0AABA0AEAQNABAABBBwAAQQcAAAQdAAAEHQAAEHQAAEDQAQBA0AEAAEEHAABBBwAABB0AAAQdAAAQdAAAEHQAAEDQAQBA0AEAAEEHAABBBwAABB0AABB0AAAQdAAAQNABAEDQAQAAQQcAAEEHAAAEHQAABB0AANgE1HRQf3cs2PQAAAAASUVORK5CYII=){.bi
.x0 .y0 .w1 .h1}

::: {.c .x0 .y1a0 .w1 .hb}
::: {.t .m0 .x1 .h3 .y1a1 .ff1 .fs0 .fc1 .sc0 .ls0 .ws0}
许多[读者指出关于[calloc()]{.ff2}的建议不总是好主意，如果使用场景是极端情况下或者非标准硬件（是坏主意]{.fc0}
:::

::: {.t .m0 .x1 .h3 .y1a2 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
的示例：大内存分配、嵌入式设备上的内存分配、在30年前的老硬件上内存分配等）。
:::

::: {.t .m0 .x1 .h3 .y1a3 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
CharlesRandolph指出"Building（构建）"这个词有拼写错误。
:::

::: {.t .m0 .x1 .h3 .y1a4 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
SvenNeuhaus友善的指出我也没有拼写"initialization（初始化）"和"initializers（初始设置）"的
:::

::: {.t .m0 .x1 .h3 .y1a5 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
能力。（并且也指出我在这里第一次也拼错了"initialization"这个单词）
:::

::: {.t .m0 .x1 .h3 .y1a6 .ff1 .fs0 .fc1 .sc0 .ls0 .ws0}
ColmMacCárthaigh[指出我忘记提及[\#pragma once]{.ff2}。]{.fc0}
:::

::: {.t .m0 .x1 .h3 .y1a7 .ff1 .fs0 .fc1 .sc0 .ls0 .ws0}
JeffreyYasskin[指出我们也应该禁止严格别名（主要针对gcc的优化）。]{.fc0}
:::

::: {.t .m0 .x1 .h3 .y1a8 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
JefferyYasskin同时为[-fno-strict-aliasing]{.ff2}章节提供了更好的措辞。
:::

::: {.t .m0 .x1 .h3 .y1a9 .ff1 .fs0 .fc1 .sc0 .ls0 .ws0}
ChrisPalmer[和其他一些读者指出calloc相比于malloc参数上的优势，编写一个[calloc()]{.ff2}的包装的整体缺]{.fc0}
:::

::: {.t .m0 .x1 .h3 .y1aa .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
点，因为[calloc()]{.ff2}相比于[malloc()]{.ff2}提供了更加安全的接口。
:::

::: {.t .m0 .x1 .h3 .y1ab .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
DamienSorresso指出我们应该提醒读者针对[calloc()]{.ff2}请求获取的初始化置零内存调用[realloc()]{.ff2}不会将
:::

::: {.t .m0 .x1 .h3 .y1ac .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
增长的内存置零。
:::

::: {.t .m0 .x1 .h3 .y1ad .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
PatPogson指出我也没有正确拼写"declare（定义）"单词的能力。
:::

::: {.t .m0 .x1 .h3 .y1ae .ff1 .fs0 .fc1 .sc0 .ls0 .ws0}
\@TopShibe[指出栈分配初始化示例是错误的，因为我提供的这个示例是全局变量。将措辞修改成了"自]{.fc0}
:::

::: {.t .m0 .x1 .h3 .y1af .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
动分配内存"，以表示栈或数据段。
:::

::: {.t .m0 .x1 .h3 .y1b0 .ff1 .fs0 .fc1 .sc0 .ls0 .ws0}
JonathanGrynspan[建议在变长数组（VLA）示例前后增加更严厉的措辞，因为变长数组误用时是危险]{.fc0}
:::

::: {.t .m0 .x1 .h3 .y1b1 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
的。
:::

::: {.t .m0 .x1 .h3 .y1b2 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
DavidO\'Mahony友善的指出"specify（指定）"单词拼写错误。
:::

::: {.t .m0 .x1 .h3 .y1b3 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
DavidAlanGilbert博士指出[ssize\_t]{.ff2}是POSIX行为，Windows平台要么没有定义，要么被定义成无符号
:::

::: {.t .m0 .x1 .h3 .y1b4 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
类型，这明显会引入各种有趣的行为，因为该类型在POSIX平台是有符号类型，而Windows平台上是无
:::

::: {.t .m0 .x1 .h3 .y1b5 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
符号的。
:::

::: {.t .m0 .x1 .h3 .y1b6 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
ChrisRidd建议我们明确说明C99是1999年以后定义的，而C11是2011年定义的，否则说11比99新看起
:::

::: {.t .m0 .x1 .h3 .y1b7 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
来很奇怪。
:::

::: {.t .m0 .x1 .h3 .y1b8 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
ChrisRidd同时注意到[clang-format]{.ff2}示例使用了不清晰的命名约定，并且建议跨示例的命名一致性。
:::

::: {.t .m0 .x1 .h3 .y1b9 .ff1 .fs0 .fc1 .sc0 .ls0 .ws0}
AnthonyLeGoff[指出有一份名为]{.fc0}ModernC[的文档提供了书籍长度的现代C思想。]{.fc0}
:::

::: {.t .m0 .x1 .h3 .y1ba .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
StuartPopejoy指出我对"deliberately（故意）"单词的拼写错误是真的拼写错误。
:::

::: {.t .m0 .x1 .h3 .y1bb .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
JackRosen指出我使用了"exists（存在）"但是实际想表示的是"exits（退出）"。
:::

::: {.t .m0 .x1 .h3 .y1bc .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
JoBooth指出我将"compatibility（兼容性）"拼成了"compatability"，看上去更加有逻辑，但是英
:::

::: {.t .m0 .x1 .h3 .y1bd .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
国公民（Englishcommonality）不同意。
:::

::: {.t .m0 .x1 .h3 .y1be .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
StephenAnderson将我拼错的"stil"改正成"still"。
:::

::: {.t .m0 .x1 .h3 .y1bf .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
RichardWeinberger指出使用[{0}]{.ff2}语法初始化结构体，不会将填充字节置零，因此将[{0}]{.ff2}结构体通过网络
:::

::: {.t .m0 .x1 .h3 .y1c0 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
传输在特定结构体下可能会无意泄漏一些字节。
:::

::: {.t .m0 .x1 .h3 .y1c1 .ff1 .fs0 .fc1 .sc0 .ls0 .ws0}
\@JayBhukhanwala[指出]{.fc0}返回值类型[章节中的函数注释不准确，因为当代码变化时，没有更新注释（很像]{.fc0}
:::

::: {.t .m0 .x1 .h3 .y1c2 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
我们生活中的故事吧？）
:::

::: {.t .m0 .x1 .h3 .y1c3 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
Lorenzo指出在[参数类型]{.fc1}章节中，我们应该对潜在的跨平台对齐问题提供明确的警告。
:::

::: {.t .m0 .x1 .h3 .y1c4 .ff1 .fs0 .fc1 .sc0 .ls0 .ws0}
PaoloG.Giarrusso[重新明确了我之前为示例添加的对齐警告，并给予了更加正确的提示。]{.fc0}
:::

::: {.t .m0 .x1 .h3 .y1c5 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
FabianKlötzl提供了有效的结构体复合字面量赋值示例，它完美的语法，我之前没有遇见过。
:::

::: {.t .m0 .x1 .h3 .y1c6 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
OmkarEkbote提供了拼写错误和一致性问题的全面走查，包括"platform（平台）"、"actually（事
:::

::: {.t .m0 .x1 .h3 .y1c7 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
实上）"、"defining（定义）"、"experience（经验）"、"simultaneously（同
:::
:::

[](https://twitter.com/lordcyphar/status/685444198481412096){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:56.003025px;bottom:775.491700px;width:21.010586px;height:14.257320px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://twitter.com/colmmacc/status/685493166988906497){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:56.003025px;bottom:680.944340px;width:99.800289px;height:14.256830px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://twitter.com/jyasskin/status/685493531515826176){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:56.003025px;bottom:661.434570px;width:72.786678px;height:14.256840px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://twitter.com/fugueish/status/685503534230458369){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:56.003025px;bottom:623.165040px;width:63.031765px;height:14.256840px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://twitter.com/TopShibe/status/685505183762223105){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:56.003025px;bottom:527.116210px;width:58.529499px;height:14.257810px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://twitter.com/grynspan/status/685509158024691712){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:56.003025px;bottom:489.597660px;width:96.798794px;height:14.256830px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://twitter.com/Ideo_logiq/status/685384708188930048){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:56.003025px;bottom:319.261720px;width:82.541592px;height:14.257810px;background-color:rgba(255,255,255,0.000001);"}
:::

[](http://icube-icps.unistra.fr/img_auth.php/d/db/ModernC.pdf){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:212.081700px;bottom:319.261720px;width:50.275330px;height:14.257810px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://twitter.com/JayBhukhanwala){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:56.003025px;bottom:168.435550px;width:93.046902px;height:14.257810px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://www.zybuluo.com/babydragon/note/265885#_return-parameter-types){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:170.060520px;bottom:168.435550px;width:52.526470px;height:14.257810px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://www.zybuluo.com/babydragon/note/265885#_parameter-types){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:128.039337px;bottom:130.916992px;width:42.021183px;height:14.256836px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://twitter.com/Blaisorblade/status/686042231917178881){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:56.003025px;bottom:112.157227px;width:92.296520px;height:14.257812px;background-color:rgba(255,255,255,0.000001);"}
:::
:::

::: {.pi data="{\"ctm\":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}"}
:::
:::

::: {#pfd .pf .w0 .h0 page-no="d"}
::: {.pc .pcd .w0 .h0}
![](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA+AAAAXLCAIAAAAz/kHlAAAACXBIWXMAABYlAAAWJQFJUiTwAAAdGUlEQVR42uzdsWtVVxzA8Xv0CsmWm02nxjiYhEiGTA5CBEF4GKKE/A/SwaVk1P9EF7OooCiWtoODQwVRiYpWCmpx0NLB6yIv9Bl/HQLhddEEY+7JzeczeSD4cn/H6NfDeUmKiAIAAMjDHiMAAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AAGhWuZEPSqk2Kb4qotq1z+5rBPx1B7BlXRERpgAAAJlwxQUAAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAIBWK40AMpdSbQhfFVEZAgDt4AQdAAAykiLCFAAAIBNO0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AABAoAMAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAAAIdAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAgEAHAACBDgAACHQAABDoAACAQAcAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAAAEOgAACHQAAECgAwCAQAcAAAQ6AAAIdAAAQKADAIBABwAABDoAAAh0AABAoAMAgEAHAAAEOgAAINABAECgAwAAAh0AAAQ6AAAg0AEAQKADAAACHQAABDoAACDQAQBAoAMAAAIdAAAEOgAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAA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){.bi
.x0 .y0 .w1 .h1}

::: {.c .x0 .ye4 .w1 .ha}
::: {.t .m0 .x1 .h3 .y1c8 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
时）"、"readability（可读性）"等，同时标注了其他一些含糊的措辞。
:::

::: {.t .m0 .x1 .h3 .y1c9 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
CarloBellettini修正了我对"aberrant（错误的）"单词错误的拼写。
:::

::: {.t .m0 .x1 .h3 .y1ca .ff1 .fs0 .fc1 .sc0 .ls0 .ws0}
KeithSThompson[在其巨著]{.fc0}C如何回应（HowtoCResponse）[中提供了很多技术更正。]{.fc0}
:::

::: {.t .m0 .x1 .h3 .y1cb .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
MarcBevand指出我们应该谈谈[inttypes.h]{.fc1}头文件中提供的[fprintf]{.ff2}类型描述符。
:::

::: {.t .m0 .x1 .h3 .y1cc .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
reddit上很多读者被激怒，因为本文最初被一些地方误"引用"。对不起，疯狂的读者，但是本文刚开始
:::

::: {.t .m0 .x1 .h3 .y1cd .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
被公开时是一篇几年前未经编辑、未经审核的旧草稿。这些错误已经修正。
:::

::: {.t .m0 .x1 .h3 .y1ce .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
一些读者同时指出静态初始化示例使用全局变量，这样可以在让变量总是初始化成零（事实上它们都没有
:::

::: {.t .m0 .x1 .h3 .y1cf .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
初始化，只是被静态分配了内存）。在我看来这个示例是一个糟糕的选择，但是想表达的概念仍然代表在
:::

::: {.t .m0 .x1 .h3 .y1d0 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
函数作用域内典型的用法。这个示例是表示一些通用的"代码片段"，而不代表必须使用全局变量。
:::

::: {.t .m0 .x1 .h3 .y1d1 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
一些读者将本文理解成"我讨厌C语言"，其实并不是这样。C语言用在错误的地方（没有足够测试、大
:::

::: {.t .m0 .x1 .h3 .y1d2 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
规模部署的时候没有足够的经验等）是危险的，因此自相矛盾的两类C语言开发者应该只有新手爱好者
:::

::: {.t .m0 .x1 .h3 .y1d3 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
（代码出现问题没有关系，它只是一个玩具）和希望测试到死的人（代码出现问题会引起生命和财产损
:::

::: {.t .m0 .x1 .h3 .y1d4 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
失，它不是一个玩具），他们应该在生产环境使用C语言编写代码。对于"普通观察者进行C语言开
:::

::: {.t .m0 .x1 .h3 .y1d5 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
发"的使用空间很小。对于其他开发者，这就是为什么我们有Erlang语言。
:::

::: {.t .m0 .x1 .h3 .y1d6 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
许多读者还提到他们自己的疑问或者超出本文范围的问题（包括新的C11标准的特性，例如[George]{.fc1}
:::

::: {.t .m0 .x1 .h3 .y1d7 .ff1 .fs0 .fc1 .sc0 .ls0 .ws0}
Makrydakis[提醒我们关于C11的属性推导能力）。]{.fc0}
:::

::: {.t .m0 .x1 .h3 .y1d8 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
或许另一篇关于"C语言实践"的文章将会覆盖测试、性能调优、性能追踪、可选但是有用的警告级别
:::

::: {.t .m0 .x1 .h3 .y1d9 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
等。
:::

::: {.t .m0 .x1 .h3 .y1da .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
查看英文原文：[HowtoCin2016]{.fc1}
:::

::: {.t .m0 .x1 .h3 .y1db .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
感谢[魏星]{.fc1}对本文的审校。
:::

::: {.t .m0 .x1 .h3 .y1dc .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
给InfoQ中文站投稿或者参与内容翻译工作，请邮件至[editors\@cn.infoq.com]{.fc1}。也欢迎大家通过新浪微
:::

::: {.t .m0 .x1 .h3 .y1dd .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
博（[\@InfoQ]{.fc1}，[\@丁晓昀]{.fc1}），微信（微信号：[InfoQChina]{.fc1}）关注我们。
:::

::: {.t .m0 .x1 .h3 .y1de .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
【[QCon北京2016]{.fc1}】近日，极客邦科技经常被热门大片儿《QCon的后裔》攻陷，不少Q迷们都直呼膜拜
:::

::: {.t .m0 .x1 .h3 .y1df .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
美国硅谷Airbnb美女工程师朱赟的"撩汉"技能，女神已放话要美美的来QCon啦！男神阿里巴巴资深
:::

::: {.t .m0 .x1 .h3 .y1e0 .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
总监庄卓然也将在此邂逅。4月21\~23日，3天的约会，等你来见证。再不行动，神都帮不了你了。[约约]{.fc1}
:::

::: {.t .m0 .x1 .h3 .y1e1 .ff1 .fs0 .fc1 .sc0 .ls0 .ws0}
约[。]{.fc0}
:::

::: {.t .m0 .x7 .hc .y1e2 .ff1 .fs4 .fc3 .sc0 .ls0 .ws0}
领域
:::

::: {.t .m0 .x7 .hc .y1e3 .ff1 .fs4 .fc4 .sc0 .ls0 .ws0}
架构&设计
:::

::: {.t .m0 .x7 .hc .y1e4 .ff1 .fs4 .fc4 .sc0 .ls0 .ws0}
语言&开发
:::

::: {.t .m0 .x7 .hc .y1e5 .ff1 .fs4 .fc3 .sc0 .ls0 .ws0}
专栏
:::

::: {.t .m0 .x7 .hc .y1e6 .ff1 .fs4 .fc4 .sc0 .ls0 .ws0}
语言
:::

::: {.t .m0 .x7 .hc .y1e7 .ff1 .fs4 .fc4 .sc0 .ls0 .ws0}
语言设计
:::

::: {.t .m0 .x7 .hc .y1e8 .ff1 .fs4 .fc4 .sc0 .ls0 .ws0}
语言&开发
:::

::: {.t .m0 .x1 .hd .y1e9 .ff1 .fs5 .fc5 .sc0 .ls0 .ws0}
告诉我们您的想法
:::

::: {.t .m0 .x1 .hd .y1ea .ff1 .fs5 .fc5 .sc0 .ls0 .ws0}
社区评论[WatchThread]{.fs6 .fc6}
:::

::: {.t .m0 .x1 .hc .y1eb .ff1 .fs4 .fc0 .sc0 .ls0 .ws0}
学过C语言的人说byWongPeterPosted2016
:::

::: {.t .m0 .x1 .hc .y1ec .ff1 .fs4 .fc0 .sc0 .ls0 .ws0}
年4月1日06:29
:::

::: {.t .m0 .x1 .h3 .y1ed .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
学过C语言的人说2016年4月1日06:29by[WongPeter]{.fc1}
:::

::: {.t .m0 .x1 .h3 .y1ee .ff1 .fs0 .fc0 .sc0 .ls0 .ws0}
已经面目全非，完全不认识了。
:::

::: {.t .m0 .x7 .hc .y1ef .ff1 .fs4 .fc7 .sc0 .ls0 .ws0}
回复
:::
:::

[](https://github.com/Keith-S-Thompson){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:56.003025px;bottom:737.972660px;width:91.546139px;height:14.256830px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://github.com/Keith-S-Thompson/how-to-c-response){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:189.570340px;bottom:737.972660px;width:168.835090px;height:14.256830px;background-color:rgba(255,255,255,0.000001);"}
:::

[](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/inttypes.h.html){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:205.328290px;bottom:719.212890px;width:49.524950px;height:14.256840px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://twitter.com/irrequietus/status/685407732464226306){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:56.003025px;bottom:493.348630px;width:458.481105px;height:33.016600px;background-color:rgba(255,255,255,0.000001);"}
:::

[](https://matt.sh/howto-c){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:129.540085px;bottom:437.070310px;width:87.043865px;height:14.257820px;background-color:rgba(255,255,255,0.000001);"}
:::

[](http://www.infoq.com/cn/author/%E9%AD%8F%E6%98%9F){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:77.013611px;bottom:418.311520px;width:21.010589px;height:14.256840px;background-color:rgba(255,255,255,0.000001);"}
:::

[](http://www.infoq.com/cn/articles/mailto:editors@cn.infoq.com){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:305.128600px;bottom:399.551760px;width:110.305570px;height:14.256830px;background-color:rgba(255,255,255,0.000001);"}
:::

[](http://www.weibo.com/infoqchina){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:77.013611px;bottom:380.791990px;width:39.019668px;height:14.257810px;background-color:rgba(255,255,255,0.000001);"}
:::

[](http://weibo.com/u/1451714913){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:126.538574px;bottom:380.791990px;width:42.771556px;height:14.257810px;background-color:rgba(255,255,255,0.000001);"}
:::

[](http://weixin.sogou.com/gzh?openid=oIWsFt0HnZ93MfLi3pW2ggVJFRxY){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:263.857790px;bottom:380.791990px;width:57.028750px;height:14.257810px;background-color:rgba(255,255,255,0.000001);"}
:::

[](http://2016.qconbeijing.com/?utm_source=article&utm_medium=infoq&utm_campaign=textads){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:66.508316px;bottom:362.033200px;width:74.287445px;height:14.256840px;background-color:rgba(255,255,255,0.000001);"}
:::

[](http://2016.qconbeijing.com/schedule?utm_source=infoq&utm_medium=textads){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:56.003025px;bottom:305.754880px;width:475.739775px;height:33.016600px;background-color:rgba(255,255,255,0.000001);"}
:::

[](http://www.infoq.com/cn/architecture-design){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:104.777603px;bottom:274.238280px;width:49.524964px;height:12.006840px;background-color:rgba(255,255,255,0.000001);"}
:::

[](http://www.infoq.com/cn/development){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:104.777603px;bottom:258.480470px;width:49.524964px;height:12.005860px;background-color:rgba(255,255,255,0.000001);"}
:::

[](http://www.infoq.com/cn/sdfa){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:104.777603px;bottom:226.964840px;width:18.009079px;height:12.005860px;background-color:rgba(255,255,255,0.000001);"}
:::

[](http://www.infoq.com/cn/design-language){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:104.777603px;bottom:211.207030px;width:36.018158px;height:12.005860px;background-color:rgba(255,255,255,0.000001);"}
:::

[](http://www.infoq.com/cn/language-development){.l}

::: {.d .m1 style="border-style:none;position:absolute;left:104.777603px;bottom:195.449220px;width:43.521942px;height:12.005860px;background-color:rgba(255,255,255,0.000001);"}
:::
:::

::: {.pi data="{\"ctm\":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}"}
:::
:::

::: {#pfe .pf .w0 .h0 page-no="e"}
::: {.pc .pce .w0 .h0}
![](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA+AAAAAsCAIAAABqh0V4AAAACXBIWXMAABYlAAAWJQFJUiTwAAABcElEQVR42u3dIWtCURiA4TkUZtNVLWMrCwqCpoHFZNhAGOw/LFlW93+WFhb8CYIIimVpiEExGRxD0XAWBuPWlZ3L5XnaF8/9yhsu5+RCCCcAAEA6nPoEAAAg0AEAAIEOAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AAIgkn+Gz7Y776Wr2efhqVRvlYsmyAQAQ6NEMF6OnwfPv2L95vK/d2TcAACmX2V9cXmavyfHtfWDZAAAI9GjGy0ly/NjMd8e9fQMAINDjaFYayfHy/KJYOLNvAAAEehwP9V5yvL3uWjYAAOmXCyFk9Ww/t7gst+vOVdstLgAACHQAAOBvPFQEAAACHQAAEOgAACDQAQAAgQ4AAAIdAAAQ6AAAINABAACBDgAAAh0AABDoAAAg0AEAAIEOAAAIdAAAEOgAAIBABwAAgQ4AAAh0AAAQ6AAAgEAHAACBDgAACHQAABDoAADAv/gGeaEwUUC8d4UAAAAASUVORK5CYII=){.bi
.x0 .y1f0 .w1 .he}

::: {.c .x0 .ye4 .w1 .ha}
::: {.t .m0 .x7 .hc .y1f1 .ff1 .fs4 .fc7 .sc0 .ls0 .ws0}
回到顶部
:::
:::
:::

::: {.pi data="{\"ctm\":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}"}
:::
:::
:::

::: {.loading-indicator}
![](data:image/png;base64,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)
:::
